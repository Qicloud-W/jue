import{a as h,F as S,G as T}from"./element-plus-DEgQ78-a.js";import{_ as U}from"./InputUpload.vue_vue_type_style_index_0_lang-B-6SKlPI.js";import{_ as I}from"./CommonSelect-BPJDZPOW.js";import{b as k}from"./@vueuse-80B0Z04t.js";import{l as C,A as E,n as M,d as j}from"./index-CYWUNeU5.js";import{d as A,bf as x,bF as N,o as v,M as g,O as n,a as c,W as a,u as i,S as b}from"./@vue-AVcRlItG.js";const B={class:"album-config-form"},F={class:"album-config-form"},z=A({__name:"ImageConfig",props:x({showUpload:{type:Boolean}},{form:{},formModifiers:{}}),emits:["update:form"],setup(w){const{width:y}=k(),u=C(),e=N(w,"form"),_={initData:()=>{u.getAlbumGroup(),u.getAlbumTags()},handleTags:m=>{e.value&&m&&m.length&&m.forEach(async(l,s)=>{var t,d,r,p;if(typeof l=="string"){const{code:o,msg:V,data:f}=await E.save({name:l,type:"album",description:"发布相册创建的标签"});if(o!==200)return M(o,void 0,"添加标签失败："+V),(t=u.albumTags)==null?void 0:t.splice(s,1);(d=e.value)!=null&&d.tags_arr&&((r=e.value)!=null&&r.tags_arr)&&(e.value.tags_arr[s]=f.id),(p=u.albumTags)==null||p.push({id:f.id,name:l})}})}};return _.initData(),(m,l)=>{const s=h,t=S,d=I,r=U,p=T;return e.value?(v(),g(p,{key:0,model:e.value,"label-width":70,"label-position":i(y)<=768?"top":"left"},{default:n(()=>[c("div",B,[a(t,{label:"照片标题"},{default:n(()=>[a(s,{modelValue:e.value.title,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.title=o),placeholder:"请输入照片标题"},null,8,["modelValue"])]),_:1}),a(t,{label:"拍摄设备"},{default:n(()=>[a(s,{modelValue:e.value.json.device,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.json.device=o),placeholder:"请输入拍摄设备"},null,8,["modelValue"])]),_:1})]),c("div",F,[a(t,{label:"所属相册"},{default:n(()=>[a(d,{modelValue:e.value.group,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.group=o),"label-key":"name","value-key":"id",placeholder:"请选择相册",class:"w-100",options:i(u).albumGroup||[]},null,8,["modelValue","options"])]),_:1}),a(t,{label:"照片标签"},{default:n(()=>[a(d,{class:"w-100",valueKey:"id",labelKey:"name",multiple:"","allow-create":"",filterable:"","reserve-keyword":!1,options:i(u).albumTags||[],value:e.value.tags_arr,"onUpdate:value":l[3]||(l[3]=o=>e.value.tags_arr=o),placeholder:"设置照片标签",onChange:_.handleTags},null,8,["options","value","onChange"])]),_:1}),a(t,{label:"文件类型"},{default:n(()=>[a(s,{disabled:"",readonly:"","model-value":e.value.json.type},null,8,["model-value"])]),_:1}),a(t,{label:"照片大小"},{default:n(()=>[a(s,{readonly:"",disabled:"","model-value":e.value.json.size},null,8,["model-value"])]),_:1})]),m.showUpload?(v(),g(t,{key:0,label:"照片地址"},{default:n(()=>[a(r,{path:`${i(u).env.INIS_APP_THEME_NAME}/album/${new Date().toISOString().split("T")[0]}`,accept:[".png",".jpg",".jpeg",".svg+xml",".bmp",".webp",".gif",".svg"],value:e.value.image,"onUpdate:value":l[4]||(l[4]=o=>e.value.image=o)},null,8,["path","accept","value"])]),_:1})):b("",!0),a(t,{label:"照片描述"},{default:n(()=>[a(s,{modelValue:e.value.content,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.content=o),type:"textarea",autosize:{minRows:3,maxRows:12},placeholder:"请输入照片描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","label-position"])):b("",!0)}}}),R=j(z,[["__scopeId","data-v-9ea67392"]]);export{R as _};
