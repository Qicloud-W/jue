import{l as q,e as qe,w as ze,x as je,m as Le,y as Ke,z as Qe,_ as K,h as We,d as Ae,u as De,n as Me,A as Xe,B as Ge}from"./index-CYWUNeU5.js";import{_ as Je,a as Ye}from"./CommentInput-CLsnyAEF.js";import{E as A,e as Ze,f as et,i as tt,d as st,Q as at,c as nt,b as ot}from"./element-plus-DEgQ78-a.js";import{_ as it}from"./CrossImages-BztQzEcy.js";import{d as D,i as j,m as Be,k as Pe,w as lt,b as Ne,ar as rt,o as p,c as _,W as u,al as dt,u as s,O as C,V as F,U as k,S as h,aa as U,a as i,M as L,P as Ve,T as O,Q as V,X as ct,bn as pt,bl as ut,bf as He,bE as _t,bF as gt,a3 as ft,a7 as ht}from"./@vue-AVcRlItG.js";import{a as Ue,u as mt}from"./vue-router-MJGgZ6ro.js";import{a as vt,c as yt,h as kt}from"./@vueuse-80B0Z04t.js";import{_ as wt}from"./Image-CtzcM27r.js";import{_ as xt}from"./InputUpload.vue_vue_type_style_index_0_lang-B-6SKlPI.js";import{_ as $t}from"./CommonSelect-BPJDZPOW.js";import{d as St}from"./vuedraggable-_x2mUiqy.js";import"./pinia-DsZbUfLd.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./clipboard-CJr-i2j9.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./dayjs-D7ajE0Qg.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./vue-DnNucVRa.js";const R=b=>(pt("data-v-ad169cd6"),b=b(),ut(),b),Ct={class:"comment-list-wrapper"},bt={class:"p-2 card-bg br-5"},It={key:0,class:"mb-1 fs-14 card-bg p-2 br-5"},Tt=["id"],Rt={class:"flex g-2"},Et={class:"comment-info-wrap w-100"},Ft=["onClick"],jt={class:"title-color theme-hover fs-15"},Lt={class:"fs-12 light-text"},Mt=["innerHTML"],Vt={key:1,class:"cross-video-wrap mb-1 br-5 overhide"},Ht=["src"],zt={key:2,class:"flex-yc mb-1 g-2 cross-tag-wrap flex-wrap"},At={class:"flex-yc fs-12 no-select muted-color g-1"},Dt=R(()=>i("span",null,"·",-1)),Bt=["onClick"],Pt={key:4,class:"comment-reply-list mt-1 p-1 br-5"},Nt=["id"],Ut={class:"flex-yc"},Ot={class:"flex-yc g-1"},qt=["onClick"],Kt={class:"flex-yc g-1"},Qt=["onClick"],Wt=["innerHTML"],Xt={class:"flex-yc fs-12 no-select muted-color g-1"},Gt=["onClick"],Jt=R(()=>i("span",null,"·",-1)),Yt=R(()=>i("span",null,"·",-1)),Zt={key:0},es={key:1},ts=["onClick"],ss=["onClick"],as=R(()=>i("span",null,"收起评论",-1)),ns={class:"loading-wrap flex-yc flex-center my-2 fs-12 muted-color"},os=R(()=>i("span",null,"加载中...",-1)),is={key:1,class:"my-2 flex-yc flex-center fs-12 muted-color"},ls=R(()=>i("div",{class:"split"},null,-1)),rs=R(()=>i("span",{class:"mx-1"},"我是有底线的",-1)),ds=R(()=>i("div",{class:"split"},null,-1)),cs=[ls,rs,ds],ps={key:1,class:"p-2 br-5 card-bg flex-center"},us=D({__name:"CrossList",setup(b,{expose:I}){const x=Ue(),v=mt(),T=q(),E=qe(),{arrivedState:f}=vt(window),$=j([]),e=Be({pid:0,page:1,limit:12,count:0,all_page:1,loading:!1,data:null}),y=Pe(()=>{var a;return(a=T.pageList)==null?void 0:a.find(t=>t.key==="cross")}),l={fetchData:async()=>{var c,r;let a;if(!y.value)return A({type:"error",message:"动态页面不存在"});x.name==="front-page-cross-tag"&&((c=x.params)!=null&&c.id)&&(a=[["tags",`%|${(r=x.params)==null?void 0:r.id}|%`]]),e.pid=0;const{code:t,data:n}=await ze.flat({page:e.page,limit:e.limit,bind_id:y.value.id||0,bind_type:"page",like:a});t===200?(e.data||(e.data=[]),e.data=e.data.concat(n.data),e.count=n.count,e.all_page=n.page):e.data=e.data||[]},findReply:(a,t,n)=>{const c=n.find(r=>r.id===a);return c&&c.uid!==t?c:null},handleRefresh:()=>{e.data=[],e.page=1,e.all_page=1,e.count=0,l.fetchData()}};return lt(f,async a=>{a.bottom&&(e.page+=1,e.loading=!0,e.page<=e.all_page&&await l.fetchData(),e.loading=!1)}),I({refresh:l.handleRefresh}),Ne(()=>{y.value&&yt(`${y.value.title} - ${E.site.title}`)}),l.fetchData(),(a,t)=>{const n=Ze,c=et,r=Qe,m=it,S=tt,w=K,H=Je,z=We,B=rt("plyr");return p(),_("div",Ct,[u(n,{animated:"",throttle:0,loading:s(e).data===null},dt({template:C(()=>[i("div",bt,[u(n,{rows:8})])]),_:2},[s(e).data?{name:"default",fn:C(()=>{var g;return[s(e).data.length?(p(),_(F,{key:0},[(g=s(x).query)!=null&&g.name&&s(x).name==="front-page-cross-tag"?(p(),_("div",It," 话题过滤： #"+k(s(x).query.name||""),1)):h("",!0),(p(!0),_(F,null,U(s(e).data,(o,Oe)=>{var Q,W,X,G,J,Y,Z,ee,te,se,ae,ne,oe,ie,le,re,de,ce,pe,ue,_e,ge,fe,he,me,ve;return p(),_("div",{class:"comment-item-wrap card-bg mb-1 p-2 br-5",id:`article-comment-${o.id}`,key:Oe},[i("div",Rt,[u(c,{class:"flex-shrink-0 curp",shape:"square",onClick:d=>s(v).push({name:"front-user-detail",params:{id:o.uid}}),src:(W=(Q=o.result)==null?void 0:Q.author)==null?void 0:W.avatar,size:36},null,8,["onClick","src"]),i("div",Et,[i("div",{class:"flex-yc g-1 theme-hover curp w-fit",onClick:d=>s(v).push({name:"front-user-detail",params:{id:o.uid}})},[i("span",jt,k(((G=(X=o.result)==null?void 0:X.author)==null?void 0:G.nickname)||"未知用户"),1),u(r,{size:14,value:((te=(ee=(Z=(Y=(J=o==null?void 0:o.result)==null?void 0:J.author)==null?void 0:Y.result)==null?void 0:Z.level)==null?void 0:ee.current)==null?void 0:te.value)||0},null,8,["value"])],8,Ft),i("span",Lt,k(s(je)(o.create_time||0)),1)])]),i("div",{class:"comment-content article-content",innerHTML:s(Le)(o.content)},null,8,Mt),(se=o.json)!=null&&se.images&&((ne=(ae=o.json)==null?void 0:ae.images)==null?void 0:ne.length)>0?(p(),L(m,{key:0,images:((oe=o.json)==null?void 0:oe.images)||[],class:"mb-1"},null,8,["images"])):h("",!0),(ie=o.json)!=null&&ie.video?Ve((p(),_("div",Vt,[i("video",{src:(le=o.json)==null?void 0:le.video},null,8,Ht)])),[[B]]):h("",!0),(re=o.result)!=null&&re.tags&&((ce=(de=o.result)==null?void 0:de.tags)!=null&&ce.length)?(p(),_("div",zt,[(p(!0),_(F,null,U(o.result.tags,(d,M)=>(p(),L(S,{size:"small",class:"curp",key:M,onClick:P=>s(v).push({name:"front-page-cross-tag",params:{id:d.id},query:{name:d.name}})},{default:C(()=>[O("#"+k(d.name),1)]),_:2},1032,["onClick"]))),128))])):h("",!0),i("div",At,[(pe=o.json)!=null&&pe.area?(p(),_(F,{key:0},[u(w,{size:"14",name:"map-pin-2-line"}),i("span",null,k((ue=o.json)==null?void 0:ue.area),1),Dt],64)):h("",!0),i("span",{class:V(["theme-hover flex-yc curp hvco",{"theme-color":s(e).pid===o.id}]),onClick:d=>s(e).pid=s(e).pid===o.id?0:o.id},[u(w,{size:"14",name:"reply-line"}),i("span",null,k(s(e).pid===o.id?"取消评论":"评论"),1)],10,Bt)]),s(e).pid===o.id?(p(),L(H,{key:3,class:"mt-2",onHandleSend:l.handleRefresh,placeholderText:`评论 ${((ge=(_e=o.result)==null?void 0:_e.author)==null?void 0:ge.nickname)||"未知用户"}:`,focus:!0,pid:o.id,"bind-id":((fe=s(y))==null?void 0:fe.id)||0,"bind-type":"page"},null,8,["onHandleSend","placeholderText","pid","bind-id"])):h("",!0),o.replies&&o.replies.length?(p(),_("div",Pt,[(p(!0),_(F,null,U(o.replies,(d,M)=>{var P,ye,ke,we,xe,$e,Se,Ce,be,Ie,Te,Re,Ee;return p(),_("div",{class:V(["comment-item-wrap",{"mb-2":M<o.replies.length-1}]),id:`article-comment-${d.id}`,key:M},[M<2||s($).includes(o.id)?(p(),_(F,{key:0},[i("div",Ut,[i("div",Ot,[u(c,{onClick:N=>s(v).push({name:"front-user-detail",params:{id:d.uid}}),class:"flex-shrink-0 curp",src:(ye=(P=d.result)==null?void 0:P.author)==null?void 0:ye.avatar,size:18},null,8,["onClick","src"]),i("span",{onClick:N=>s(v).push({name:"front-user-detail",params:{id:d.uid}}),class:"title-color theme-hover curp flex-yc fs-14 light-text"},k(((we=(ke=d.result)==null?void 0:ke.author)==null?void 0:we.nickname)||"未知用户"),9,qt)]),o.id!==d.pid&&l.findReply(d.pid,d.uid,o.replies)?(p(),_(F,{key:0},[u(w,{name:"arrow-right-s-fill",color:"var(--light-text)"}),i("div",Kt,[i("span",{onClick:N=>{var Fe;return s(v).push({name:"front-user-detail",params:{id:(Fe=l.findReply(d.pid,d.uid,o.replies))==null?void 0:Fe.uid}})},class:"title-color flex-yc theme-hover curp fs-14 light-text"},k(((Se=($e=(xe=l.findReply(d.pid,d.uid,o.replies))==null?void 0:xe.result)==null?void 0:$e.author)==null?void 0:Se.nickname)||"未知用户"),9,Qt)])],64)):h("",!0)]),i("div",{class:"comment-content article-content",innerHTML:s(Le)(d.content)},null,8,Wt),i("div",Xt,[i("span",{class:V(["theme-hover flex-yc curp hvco",{"theme-color":s(e).pid===d.id}]),onClick:N=>s(e).pid=s(e).pid===d.id?0:d.id},[u(w,{size:"14",name:"reply-line"}),i("span",null,k(s(e).pid===d.id?"取消回复":"回复"),1)],10,Gt),Jt,i("span",null,k(s(je)(d.create_time||0)),1),Yt,i("span",null,k(s(Ke)(d.agent)||"未知设备"),1),(Ce=d.json)!=null&&Ce.area?(p(),_("span",Zt,"·")):h("",!0),(be=d.json)!=null&&be.area?(p(),_("span",es,k((Ie=d.json)==null?void 0:Ie.area),1)):h("",!0)]),s(e).pid===d.id?(p(),L(H,{key:0,class:"mb-1 mt-1",onHandleSend:l.handleRefresh,placeholderText:`回复 ${((Re=(Te=d.result)==null?void 0:Te.author)==null?void 0:Re.nickname)||"未知用户"}:`,focus:!0,pid:d.id,"bind-id":((Ee=s(y))==null?void 0:Ee.id)||0,"bind-type":"page"},null,8,["onHandleSend","placeholderText","pid","bind-id"])):h("",!0)],64)):h("",!0)],10,Nt)}),128)),!s($).includes(o.id)&&((he=o.replies)==null?void 0:he.length)>2?(p(),_("div",{key:0,style:{width:"fit-content"},class:"light-text fs-14 theme-hover curp mb-1 flex-yc",onClick:d=>s($).push(o.id)},[i("span",null,"查看全部"+k(((me=o.replies)==null?void 0:me.length)||0)+"条回复",1),u(w,{name:"arrow-down-s-line"})],8,ts)):h("",!0),s($).includes(o.id)&&((ve=o.replies)==null?void 0:ve.length)>2?(p(),_("div",{key:1,style:{width:"fit-content"},class:"light-text mt-2 fs-14 theme-hover curp mb-1 flex-yc",onClick:d=>s($).splice(s($).indexOf(o.id),1)},[as,u(w,{name:"arrow-up-s-line"})],8,ss)):h("",!0)])):h("",!0)],8,Tt)}),128)),Ve(i("div",ns,[u(w,{name:"loader-2-line ",size:"14",class:"mr5 spinner"}),os],512),[[ct,s(e).loading]]),s(e).page>s(e).all_page?(p(),_("div",is,cs)):h("",!0)],64)):(p(),_("div",ps,[u(z,{text:"暂无动态数据"})]))]}),key:"0"}:void 0]),1032,["loading"])])}}}),_s=Ae(us,[["__scopeId","data-v-ad169cd6"]]),gs={class:"comment-input-wrapper"},fs={key:0,class:"form-box-wrapper flex g-2"},hs={class:"fs-14 muted-colo placeholder"},ms=["innerHTML"],vs=D({__name:"CrossInput",props:He({focus:{type:Boolean},placeholderText:{},disImage:{type:Boolean},disVideo:{type:Boolean}},{content:{default:""},contentModifiers:{}}),emits:He(["selectImg","selectVideo"],["update:content"]),setup(b,{emit:I}){_t(a=>({"4d01a0ce":s(e)?"inline":"none"}));const x=b,v=I,T=De(),E=q(),f=j(),{focused:$}=kt(f,{initialValue:x.focus}),e=j(!0);j(!1);const y=gt(b,"content"),l={handleBlur:a=>{var c;window.removeEventListener("paste",l.handlePaste);const n=(((c=a.target)==null?void 0:c.innerHTML)||"").replace(/<div><br>/g,`
`).replace(/<div>/g,`
`).replace(/<[^>]+>/g,function(r){return/<img[^>]*>/.test(r)?r:""});n.trim()===""?y.value="":y.value=n||"",setTimeout(()=>{e.value=!y.value},200)},handleFocus:()=>{window.addEventListener("paste",l.handlePaste);const a=f.value;if(a){const t=document.createRange();t.selectNodeContents(a),t.collapse(!1);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}},handleInput:()=>{e.value=!1},handlePaste:a=>{var c,r,m;a.preventDefault();const t=(a.clipboardData||window.clipboardData).getData("text/plain"),n=document.createElement("span");e.value=!t,n.innerHTML=t,(c=window.getSelection())==null||c.deleteFromDocument(),(r=window.getSelection())==null||r.getRangeAt(0).insertNode(n),(m=window.getSelection())==null||m.collapseToEnd()},insertEmoji:a=>{y.value+=`<img src="${a}" class="emoji" />`,e.value=!1},handleClickFooter:()=>{$.value=!0}};return E.getAddress(),(a,t)=>{const n=K,c=Ye;return p(),_("div",gs,[s(T).hasLogin&&s(T).user?(p(),_("div",fs,[i("div",{class:V(["form-box w-100 br-5 trf pr",{"is-active":s($)||y.value,"is-focus":s($)}])},[i("div",hs,k(a.placeholderText||"说些什么吧..."),1),i("div",{ref_key:"inputRef",ref:f,tabindex:0,contenteditable:"true",spellcheck:"false",class:"rich-input-wrapper word-break article-content lh-17 p-1 fs-15",onInput:t[0]||(t[0]=(...r)=>l.handleInput&&l.handleInput(...r)),onFocus:t[1]||(t[1]=(...r)=>l.handleFocus&&l.handleFocus(...r)),onBlur:t[2]||(t[2]=(...r)=>l.handleBlur&&l.handleBlur(...r)),innerHTML:y.value},null,40,ms),i("div",{onClick:t[5]||(t[5]=(...r)=>l.handleClickFooter&&l.handleClickFooter(...r)),class:"comment-input-footer-wrap flex-yc g-2 p-1"},[u(c,{onHandleSelect:l.insertEmoji},{default:C(()=>[u(n,{onClick:t[3]||(t[3]=ft(()=>{},["stop"])),name:"emotion-line",class:"light-text theme-hover curp",size:"20"})]),_:1},8,["onHandleSelect"]),u(n,{name:"image-2-fill",class:V([{disabled:a.disImage},"light-text theme-hover curp"]),size:"20",onClick:t[4]||(t[4]=r=>v("selectImg"))},null,8,["class"])])],2)])):h("",!0)])}}}),ys=Ae(vs,[["__scopeId","data-v-0204dba2"]]),ks={class:"cross-submit-form-wrapper"},ws={class:"br-5 layout-100 pr no-select img-wrap"},xs={class:"layout-card wh-100"},$s={key:0,class:"overlay flex-center"},Ss={key:1,class:"flex-center img-edit-wrap"},Cs={class:"flex-yc g-2"},bs=["onClick"],Is={class:"dialog-footer"},Ts=["accept"],Rs=["accept"],Es=D({__name:"CrossForm",emits:["handleSend"],setup(b,{emit:I}){const x=I,v=j(),T=j(),E=De(),f=q(),$=Ue(),e=Be({mounted:!1,show_dialog:!1,finish:!1,loading:!1,stop:!1,upload_index:0,tags_arr:[],image_list:[],video:"",content:""}),y=Pe(()=>{var a,t;return((t=(a=f.pageList)==null?void 0:a.find(n=>n.key==="cross"))==null?void 0:t.id)||0}),l={handleSave:async()=>{var n,c,r,m;e.loading=!0;const a={area:`${((n=f.ipInfo)==null?void 0:n.province)||""}${((c=f.ipInfo)==null?void 0:c.city)||""}`,addres:((r=f.address)==null?void 0:r.formatted_address)||"",lon:f.pos.lon||0,lat:f.pos.lat||0,images:e.image_list.filter(S=>S.url&&S.status==="success").map(S=>S.url),video:e.video},t=await ze.save({pid:0,bind_id:y.value,bind_type:"page",content:e.content,tags:(m=e.tags_arr)!=null&&m.length?`|${e.tags_arr.join("|")}|`:"",json:a});e.loading=!1,Me(t,"提交成功!"),t.code===200&&(e.content="",e.video="",e.image_list=[],x("handleSend"),e.show_dialog=!1),e.loading=!1},handleSubmit:async()=>{var n;if(!e.content)return A.warning("内容不能为空");e.stop=!1;let a=0;e.upload_index=0;async function t(){if(!e.stop){a++;try{await l.uploadFile(a-1)}finally{e.upload_index=e.upload_index+1,e.upload_index===e.image_list.length&&(e.finish=!0,l.handleSave()),a<e.image_list.length&&t()}}}(n=e.image_list)!=null&&n.length?t():l.handleSave()},handleTags:a=>{a&&a.length&&a.forEach(async(t,n)=>{var c,r;if(typeof t=="string"){const{code:m,msg:S,data:w}=await Xe.save({name:t,type:"cross",description:"发布动态创建的标签"});if(m!==200)return Me(m,void 0,"添加标签失败："+S),(c=f.albumTags)==null?void 0:c.splice(n,1);e.tags_arr[n]=w.id,(r=f.crossTags)==null||r.push({id:w.id,name:t})}})},handleRemove:a=>{const t=e.image_list.findIndex(n=>n===a);t!==-1&&e.image_list.splice(t,1)},uploadFile:async a=>{var n,c,r;const t=(n=e.image_list[a])==null?void 0:n.file;if(((c=e.image_list[a])==null?void 0:c.status)!=="success"&&t)try{if(!e.image_list[a].url){const m=await Ge.upload(t,`${f.env.INIS_APP_THEME_NAME}/cross/image/${new Date().toISOString().split("T")[0]}`,void 0,S=>{l.handleProgress(a,S)});m.code===200?(e.image_list[a].url=m.data.path,e.image_list[a].status="success"):e.image_list[a].status="fail"}}catch(m){console.error((r=e.image_list[a].file)==null?void 0:r.name,m),e.image_list[a].status="fail"}},handleProgress:(a,t)=>{const n=parseInt(t.progress?`${(t.progress*100).toString().substring(0,5)}`:"0");e.image_list[a].progress=n||0},handleImageSelect:a=>{const n=a.target.files;if(n&&n.length>0)for(let c=0;c<n.length;c++){const r=n[c];l.handleFilterFile(r)}},handleVideoSelect:a=>{const n=a.target.files;if(n&&n.length>0){if(n[0].size>50*1024*1024)return A.warning("视频文件大小不能超过50M");e.video=URL.createObjectURL(n[0])}},handleFilterFile:a=>{if(a.size>10*1024*1024)return A.warning(`图片文件${a.name||""}大小不能超过10M`);e.image_list.push({file:a,progress:0,preview:URL.createObjectURL(a)})}};return Ne(()=>{document.querySelector("#send-cross-btn")&&(e.mounted=!0)}),f.getCrossTags(),(a,t)=>{const n=ys,c=$t,r=xt,m=wt,S=at,w=K,H=nt,z=ot,B=st;return p(),_("div",ks,[u(B,{modelValue:s(e).show_dialog,"onUpdate:modelValue":t[7]||(t[7]=g=>s(e).show_dialog=g),draggable:"",width:"95%",title:"发布动态"},{footer:C(()=>[i("span",Is,[u(z,{onClick:t[6]||(t[6]=g=>s(e).show_dialog=!1)},{default:C(()=>[O("取消")]),_:1}),u(z,{type:"primary",onClick:l.handleSubmit,loading:s(e).loading},{default:C(()=>[O(" 提交 ")]),_:1},8,["onClick","loading"])])]),default:C(()=>[u(n,{class:"mt-1",content:s(e).content,"onUpdate:content":t[0]||(t[0]=g=>s(e).content=g),"dis-image":s(e).video!=="","dis-video":s(e).image_list.length>0,onSelectImg:t[1]||(t[1]=g=>{var o;return(o=s(v))==null?void 0:o.click()}),onSelectVideo:t[2]||(t[2]=g=>{var o;return(o=s(T))==null?void 0:o.click()})},null,8,["content","dis-image","dis-video"]),u(c,{class:"w-100 mt-2",valueKey:"id",labelKey:"name",multiple:"","allow-create":"",filterable:"","reserve-keyword":!1,options:s(f).crossTags||[],value:s(e).tags_arr,"onUpdate:value":t[3]||(t[3]=g=>s(e).tags_arr=g),placeholder:"设置话题标签",onChange:l.handleTags},null,8,["options","value","onChange"]),u(r,{class:"mt-2",path:`${s(f).env.INIS_APP_THEME_NAME}/cross/video/${new Date().toISOString().split("T")[0]}`,disabled:s(e).image_list.length>0,placeholder:"视频链接",accept:[".mp4",".avi",".mov",".wmv",".mkv",".flv",".avchd"],value:s(e).video,"onUpdate:value":t[4]||(t[4]=g=>s(e).video=g)},null,8,["path","disabled","accept","value"]),s(e).image_list.length?(p(),L(H,{key:0,"max-height":300,class:"mt-2"},{default:C(()=>[u(s(St),{modelValue:s(e).image_list,"onUpdate:modelValue":t[5]||(t[5]=g=>s(e).image_list=g),"item-key":"id",animation:300,class:"upload-image-grid g-4 p-2 br-5"},{item:C(({element:g})=>[i("div",ws,[i("div",xs,[u(m,{class:"wh-100 br-5",src:g.preview},null,8,["src"]),g.status!=="success"?(p(),_("div",$s,[u(S,{type:"circle","striped-flow":"",width:60,"stroke-width":5,percentage:g.progress||0},null,8,["percentage"])])):h("",!0),s(e).image_list.length?(p(),_("div",Ss,[i("div",Cs,[i("div",{class:"remove-btn br-50 flex-center curp",onClick:o=>l.handleRemove(g)},[u(w,{name:"close-line",color:"#fff",size:"12"})],8,bs)])])):h("",!0)])])]),_:1},8,["modelValue"])]),_:1})):h("",!0)]),_:1},8,["modelValue"]),i("input",{multiple:"",type:"file",ref_key:"imageRef",ref:v,class:"input-file curp",accept:[".png",".jpg",".jpeg",".bmp",".webp",".gif",".svg"].join(","),onChange:t[8]||(t[8]=(...g)=>l.handleImageSelect&&l.handleImageSelect(...g))},null,40,Ts),i("input",{type:"file",ref_key:"videoRef",ref:T,class:"input-file curp",accept:[".mp4",".avi",".mov",".wmv",".mkv",".flv",".avchd"].join(","),onChange:t[9]||(t[9]=(...g)=>l.handleVideoSelect&&l.handleVideoSelect(...g))},null,40,Rs),s(e).mounted&&s(E).hasLogin&&s($).name==="front-page-cross"?(p(),L(ht,{key:0,to:"#send-cross-btn"},[i("div",{class:"send-cross-btn br-50 wh-100 shadow light-text card-bg curp flex-center",onClick:t[10]||(t[10]=g=>s(e).show_dialog=!0)},[u(w,{name:"send-plane-2-fill"})])])):h("",!0)])}}}),Fs={class:"page-cross-wrapper"},ha=D({__name:"list",setup(b){const I=j(),x=()=>{var v;(v=I.value)==null||v.refresh()};return(v,T)=>{const E=Es,f=_s;return p(),_("div",Fs,[u(E,{onHandleSend:x}),u(f,{ref_key:"crossRef",ref:I},null,512)])}}});export{ha as default};
