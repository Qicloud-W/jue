import{L as I,E as S,a5 as x,F as A,a as N,G as j,b as U}from"./element-plus-DEgQ78-a.js";import{_ as M}from"./InputUpload.vue_vue_type_style_index_0_lang-B-6SKlPI.js";import{e as P,l as $,a as f,n as V,c as T,d as R}from"./index-CYWUNeU5.js";import{s as B}from"./pinia-DsZbUfLd.js";import{d as H,m as z,o as O,M as F,O as n,a as i,W as a,u as l,bn as J,bl as K}from"./@vue-AVcRlItG.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-D7ajE0Qg.js";import"./clipboard-CJr-i2j9.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./@vueuse-80B0Z04t.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./vue-router-MJGgZ6ro.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";const h=_=>(J("data-v-d1878cc9"),_=_(),K(),_),G={class:"flex-yc g-2"},L=h(()=>i("span",null,"主题设置",-1)),W={class:"site-config-form"},q={class:"pt-2 flex-end"},D=h(()=>i("span",{class:"px-1"},"保存",-1)),Q=h(()=>i("span",{class:"px-1"},"恢复",-1)),X=h(()=>i("span",{class:"px-1"},"备份",-1)),Y=H({__name:"theme",setup(_){const s=P(),u=$(),{theme:t}=B(s),E=`config:${s.theme_name}-theme`,y=`backup:${s.theme_name}-theme`,d=z({save_loading:!1,recover_loading:!1,backup_loading:!1}),m={handleSave:async()=>{d.save_loading=!0;const r=`${s.theme_name}主题配置`,e=await f.save({key:E,value:r,json:JSON.stringify(s.theme)});d.save_loading=!1,V(e)},handleRecover:async()=>{d.recover_loading=!0;const r=await f.one(y);if(r.code===200){s.$patch({theme:r.data.json});const{code:e}=await f.save({key:E,value:`${s.theme_name}主题配置`,json:JSON.stringify(r.data.json)});e===200&&S.success("恢复成功")}else V(r);d.recover_loading=!1},handleBackup:async()=>{d.backup_loading=!0;const r=`${s.theme_name}主题配置备份`,e=await f.save({key:y,value:r,json:JSON.stringify(s.theme)});d.backup_loading=!1,V(e,"备份成功")},changeColor:(r,e)=>{s.theme.colors[r]=e.toString(),s.setColorTheme()}};return(r,e)=>{const k=T,v=x,p=A,c=M,g=N,C=j,b=U,w=I;return O(),F(w,{class:"box-card cus-box-card",shadow:"never"},{header:n(()=>[i("div",G,[a(k,{name:"web",size:"20"}),L])]),default:n(()=>[a(C,{model:l(t),"label-position":"top"},{default:n(()=>[i("div",W,[a(p,{label:"主题色"},{default:n(()=>[a(v,{onActiveChange:e[0]||(e[0]=o=>m.changeColor("primary",o)),modelValue:l(s).theme.colors.primary,"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).theme.colors.primary=o)},null,8,["modelValue"])]),_:1}),a(p,{label:"成功色"},{default:n(()=>[a(v,{onActiveChange:e[2]||(e[2]=o=>m.changeColor("success",o)),modelValue:l(s).theme.colors.success,"onUpdate:modelValue":e[3]||(e[3]=o=>l(s).theme.colors.success=o)},null,8,["modelValue"])]),_:1}),a(p,{label:"警告色"},{default:n(()=>[a(v,{onActiveChange:e[4]||(e[4]=o=>m.changeColor("warning",o)),modelValue:l(s).theme.colors.warning,"onUpdate:modelValue":e[5]||(e[5]=o=>l(s).theme.colors.warning=o)},null,8,["modelValue"])]),_:1}),a(p,{label:"危险色"},{default:n(()=>[a(v,{onActiveChange:e[6]||(e[6]=o=>m.changeColor("danger",o)),modelValue:l(s).theme.colors.danger,"onUpdate:modelValue":e[7]||(e[7]=o=>l(s).theme.colors.danger=o)},null,8,["modelValue"])]),_:1}),a(p,{label:"日间logo"},{default:n(()=>[a(c,{clearable:"",accept:[".jpg",".png",".jpeg",".svg",".webp"],path:`${l(u).env.INIS_APP_THEME_NAME}/theme`,value:l(t).logo_light,"onUpdate:value":e[8]||(e[8]=o=>l(t).logo_light=o)},null,8,["accept","path","value"])]),_:1}),a(p,{label:"夜间logo"},{default:n(()=>[a(c,{clearable:"",accept:[".jpg",".png",".jpeg",".svg",".webp"],path:`${l(u).env.INIS_APP_THEME_NAME}/theme`,value:l(t).logo_dark,"onUpdate:value":e[9]||(e[9]=o=>l(t).logo_dark=o)},null,8,["accept","path","value"])]),_:1}),a(p,{label:"网站logo(小)"},{default:n(()=>[a(c,{clearable:"",accept:[".jpg",".png",".jpeg",".svg",".webp"],path:`${l(u).env.INIS_APP_THEME_NAME}/theme`,value:l(t).logo_small,"onUpdate:value":e[10]||(e[10]=o=>l(t).logo_small=o)},null,8,["accept","path","value"])]),_:1}),a(p,{label:"favicon图标"},{default:n(()=>[a(c,{clearable:"",accept:[".ico",".png",".jpeg",".svg"],path:`${l(u).env.INIS_APP_THEME_NAME}/theme`,value:l(t).favicon,"onUpdate:value":e[11]||(e[11]=o=>l(t).favicon=o)},null,8,["accept","path","value"])]),_:1}),a(p,{label:"登录页背景"},{default:n(()=>[a(c,{clearable:"",accept:[".jpg",".png",".jpeg",".svg",".webp",".gif"],path:`${l(u).env.INIS_APP_THEME_NAME}/theme`,value:l(t).login_bg,"onUpdate:value":e[12]||(e[12]=o=>l(t).login_bg=o)},null,8,["accept","path","value"])]),_:1}),a(p,{label:"懒加载占位图"},{default:n(()=>[a(c,{clearable:"",accept:[".jpg",".png",".jpeg",".svg",".webp",".gif"],path:`${l(u).env.INIS_APP_THEME_NAME}/theme`,value:l(t).lazy_placeholder,"onUpdate:value":e[13]||(e[13]=o=>l(t).lazy_placeholder=o)},null,8,["accept","path","value"])]),_:1}),a(p,{label:"ICP备案号"},{default:n(()=>[a(g,{modelValue:l(t).icp,"onUpdate:modelValue":e[14]||(e[14]=o=>l(t).icp=o),clearable:"",placeholder:"请输入icp备案号"},null,8,["modelValue"])]),_:1}),a(p,{label:"公安备案号"},{default:n(()=>[a(g,{modelValue:l(t).polnm,"onUpdate:modelValue":e[15]||(e[15]=o=>l(t).polnm=o),clearable:"",placeholder:"请输入公安备案号"},null,8,["modelValue"])]),_:1})]),a(p,{label:"版权信息"},{default:n(()=>[a(g,{modelValue:l(t).copyright,"onUpdate:modelValue":e[16]||(e[16]=o=>l(t).copyright=o),clearable:"",placeholder:"请设置版权信息"},null,8,["modelValue"])]),_:1}),a(p,{label:"登录页欢迎语"},{default:n(()=>[a(g,{modelValue:l(t).login_text,"onUpdate:modelValue":e[17]||(e[17]=o=>l(t).login_text=o),type:"textarea",placeholder:"登录页文字介绍...",autosize:{minRows:4,maxRows:8}},null,8,["modelValue"])]),_:1}),a(p,{label:"自定义侧栏html"},{default:n(()=>[a(g,{modelValue:l(t).side_html,"onUpdate:modelValue":e[18]||(e[18]=o=>l(t).side_html=o),type:"textarea",placeholder:"自定义侧栏html...",autosize:{minRows:6,maxRows:18}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),i("div",q,[a(b,{type:"primary",loading:l(d).save_loading,onClick:m.handleSave},{default:n(()=>[D]),_:1},8,["loading","onClick"]),a(b,{type:"success",loading:l(d).recover_loading,onClick:m.handleRecover},{default:n(()=>[Q]),_:1},8,["loading","onClick"]),a(b,{type:"warning",loading:l(d).backup_loading,onClick:m.handleBackup},{default:n(()=>[X]),_:1},8,["loading","onClick"])])]),_:1})}}}),je=R(Y,[["__scopeId","data-v-d1878cc9"]]);export{je as default};
