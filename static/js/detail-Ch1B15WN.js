import{a as q,F as N,G as Y,b as F,L as U,e as z,f as Q,$ as R,R as G,S as H}from"./element-plus-DEgQ78-a.js";import{_ as T}from"./CommonSelect-BPJDZPOW.js";import{_ as P}from"./InputUpload.vue_vue_type_style_index_0_lang-B-6SKlPI.js";import{l as J,F as M,n as O,c as D,d as A,M as W,N as K,_ as X,u as Z,e as ee}from"./index-CYWUNeU5.js";import{g as se}from"./options-BvRdR4NQ.js";import{d as V,m as C,bF as oe,o as p,M as g,O as l,a as e,W as s,u as d,S as j,T as k,bn as B,bl as L,i as te,ar as S,c as $,V as le,aa as ae,P as I,U as v,al as ne,bg as ie}from"./@vue-AVcRlItG.js";import{_ as re}from"./BarChart.vue_vue_type_script_setup_true_lang-C1VHl77b.js";import{_ as ce}from"./Scroller-DkdJDvf3.js";import{_ as de}from"./LevelCard-DHbTnBuq.js";import{p as E}from"./vueuse-CTCWISgP.js";import{a as me,u as pe}from"./vue-router-MJGgZ6ro.js";import{c as ue}from"./@vueuse-80B0Z04t.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-D7ajE0Qg.js";import"./clipboard-CJr-i2j9.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-DsZbUfLd.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";import"./vue-echarts-Cj-EF8m3.js";import"./resize-detector-CZu9PX2v.js";import"./echarts-POvjvhJQ.js";import"./zrender-Cz51xgKC.js";import"./LevelBadge-cCdUF6Zc.js";const _e=u=>(B("data-v-d6457896"),u=u(),L(),u),ve={class:"flex-yc g-2"},fe=_e(()=>e("span",null,"信息设置",-1)),he={class:"user-config-form"},ge={class:"user-config-form"},be={class:"user-config-form"},ye={class:"user-config-form"},xe={class:"tr mt-3 w-100"},we=V({__name:"UserConfig",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(u){const a=C({loading:!1,gender_options:se}),t=oe(u,"value"),b=J(),f={handleSubmit:async()=>{a.loading=!0;try{const i={...t.value};i.json=i.json??JSON.stringify(i.json);const o=await M.save(i);O(o)}finally{a.loading=!1}}};return(i,o)=>{const n=D,m=q,r=N,h=P,y=T,x=Y,_=F,w=U;return p(),g(w,{class:"box-card cus-box-card pr h-100",shadow:"never"},{header:l(()=>[e("div",ve,[s(n,{name:"config",size:"20"}),fe])]),default:l(()=>[t.value?(p(),g(x,{key:0,model:t.value,"label-position":"top"},{default:l(()=>[e("div",he,[s(r,{label:"昵称"},{default:l(()=>[s(m,{modelValue:t.value.nickname,"onUpdate:modelValue":o[0]||(o[0]=c=>t.value.nickname=c),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),s(r,{label:"头像"},{default:l(()=>[s(h,{accept:[".jpg",".png",".jpeg",".svg",".webp"],path:`${d(b).env.INIS_APP_THEME_NAME}/user`,value:t.value.avatar,"onUpdate:value":o[1]||(o[1]=c=>t.value.avatar=c)},null,8,["accept","path","value"])]),_:1})]),e("div",ge,[s(r,{label:"邮箱"},{default:l(()=>[s(m,{modelValue:t.value.email,"onUpdate:modelValue":o[2]||(o[2]=c=>t.value.email=c),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),s(r,{label:"性别"},{default:l(()=>[s(y,{value:t.value.gender,"onUpdate:value":o[3]||(o[3]=c=>t.value.gender=c),options:d(a).gender_options},null,8,["value","options"])]),_:1})]),e("div",be,[s(r,{label:"QQ"},{default:l(()=>[s(m,{modelValue:t.value.json.qq,"onUpdate:modelValue":o[4]||(o[4]=c=>t.value.json.qq=c),placeholder:"请输入QQ号"},null,8,["modelValue"])]),_:1}),s(r,{label:"微信"},{default:l(()=>[s(m,{modelValue:t.value.json.wechat,"onUpdate:modelValue":o[5]||(o[5]=c=>t.value.json.wechat=c)},null,8,["modelValue"])]),_:1})]),e("div",ye,[s(r,{label:"B站主页"},{default:l(()=>[s(m,{modelValue:t.value.json.bilibili,"onUpdate:modelValue":o[6]||(o[6]=c=>t.value.json.bilibili=c),placeholder:"请输入B站主页"},null,8,["modelValue"])]),_:1}),s(r,{label:"Github主页"},{default:l(()=>[s(m,{modelValue:t.value.json.github,"onUpdate:modelValue":o[7]||(o[7]=c=>t.value.json.github=c),placeholder:"请输入github主页"},null,8,["modelValue"])]),_:1})]),s(r,{label:"描述"},{default:l(()=>[s(m,{modelValue:t.value.description,"onUpdate:modelValue":o[8]||(o[8]=c=>t.value.description=c),type:"textarea",autosize:{minRows:3,maxRows:12},placeholder:"请输入简介"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):j("",!0),e("div",xe,[s(_,{loading:d(a).loading,type:"primary",onClick:f.handleSubmit},{default:l(()=>[k(" 提交保存 ")]),_:1},8,["loading","onClick"])])]),_:1})}}}),ke=A(we,[["__scopeId","data-v-d6457896"]]),$e=u=>(B("data-v-d536f49b"),u=u(),L(),u),Ve={class:"flex-yc g-2"},je=$e(()=>e("span",null,"成长等级",-1)),Se={class:"flex g-3 level-info-wrapper"},Ie={class:"fs-12 title-color h-1x"},Ue={class:"fs-12 muted-color h-1x"},Ce={class:"theme-color"},Ee={class:"level-chart w-100"},Me=V({__name:"LevelInfo",props:{user:{}},setup(u){const a=[{exp:30,icon:"calendar-1",limit:1,title:"签到"},{exp:5,icon:"renli",limit:1,title:"登录"},{exp:1,icon:"thumb",limit:10,title:"点赞"},{exp:1,icon:"collect",limit:10,title:"收藏"},{exp:1,icon:"zuji",limit:10,title:"访问"},{exp:1,icon:"share",limit:10,title:"分享"},{exp:1,icon:"comment-1",limit:10,title:"评论"}],t=te({backgroundColor:"",grid:{left:0,right:0,bottom:0,containLabel:!0},tooltip:{trigger:"axis",formatter:i=>`<div>LV.${i[0].data.level} - ${i[0].axisValue}</div><div class="flex-yc mt5"><div style="width: 12px;height:12px" class="theme-bg br-50 mr5"></div><span class="mr-3">经验值</span><span>${i[0].data.value}</span></div>`},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:[{name:"经验值",barWidth:"40%",data:[],type:"bar",emphasis:{disabled:!0}}],color:["var(--primary-color)"]}),b=C({data:[]});return{fetchData:async()=>{const{code:i,data:o}=await W.column({fied:"exp,value,name",order:"exp asc"});i===200&&(b.data=o,t.value.xAxis.data=o.map(n=>n.name),t.value.series[0].data=o.map(n=>({value:n.exp,level:n.value})))}}.fetchData(),(i,o)=>{const n=D,m=de,r=ce,h=U,y=re,x=S("ripple");return p(),g(h,{class:"box-card cus-box-card pr h-100",shadow:"hover"},{header:l(()=>[e("div",Ve,[s(n,{name:"level",size:"20"}),je])]),default:l(()=>[e("div",Se,[s(m,{class:"w-100",user:i.user},null,8,["user"]),s(h,{class:"w-100 g-2 level-grow-wrapper",shadow:"never"},{default:l(()=>[s(r,{class:"w-100",duration:10,direction:"up",height:"100%",width:"100%"},{default:l(()=>[(p(),$(le,null,ae(a,(_,w)=>I(e("div",{key:w,class:"w-100 br-5 mb-1 flex-yc level-grow-border p-1 flex g-1"},[s(n,{name:_.icon,size:"32"},null,8,["name"]),e("div",null,[e("div",Ie,v(_.title),1),e("p",Ue,[k(" 经验"),e("span",Ce,"+"+v(_.exp),1),k("，每日限"+v(_.limit)+"次 ",1)])])]),[[x]])),64))]),_:1})]),_:1})]),e("div",Ee,[s(y,{class:"level-bar-chart",option:d(t)},null,8,["option"])])]),_:1})}}}),De=A(Me,[["__scopeId","data-v-d536f49b"]]),Ae={class:"center py-2 px-2"},Be={class:"flex-center g-2 mt-1"},Le={class:"fw-600 fs-20"},qe={class:"fs-14 text-color lh-15 mt-1 lh-2"},Ne=e("div",{class:"split-line my-2"},null,-1),Ye={class:"user-info fs-14"},Fe={class:"flex-yc g-1 mt-1"},ze={class:"flex-yc flex-shrink-0"},Qe=e("span",{class:"ml5 no-select"},"性别：",-1),Re={class:"flex-yc g-1 mt-1"},Ge={class:"flex-yc flex-shrink-0"},He=e("span",{class:"ml5 no-select"},"邮箱：",-1),Te={class:"flex-yc g-1 mt-1"},Pe={class:"flex-yc flex-shrink-0"},Je=e("span",{class:"ml5 no-select"},"头衔：",-1),Oe={class:"flex-yc g-1 mt-1"},We={class:"flex-yc flex-shrink-0"},Ke=e("span",{class:"ml5 no-select"},"微信：",-1),Xe={class:"flex-yc g-1 mt-1"},Ze={class:"flex-yc flex-shrink-0"},es=e("span",{class:"ml5 no-select"},"QQ：",-1),ss={class:"flex-yc g-1 mt-1"},os={class:"flex-yc flex-shrink-0"},ts=e("span",{class:"ml5 no-select"},"B站：",-1),ls={key:1},as={class:"flex-yc g-1 mt-1"},ns={class:"flex-yc flex-shrink-0"},is=e("span",{class:"ml5 no-select"},"Github：",-1),rs={key:1},cs=e("div",{class:"split-line my-2"},null,-1),ds={class:"flex-yc g-1 mt-1 fs-12 muted-color"},ms=e("span",{class:"no-select flex-shrink-0"},"注册时间：",-1),ps={class:"flex-yc g-1 fs-12 muted-color"},us=e("span",{class:"no-select flex-shrink-0"},"上次登录：",-1),_s=V({__name:"UserCard",props:{user:{}},setup(u){return(a,t)=>{const b=z,f=Q,i=X,o=R,n=U,m=S("imgbox"),r=S("ripple");return I((p(),g(n,{class:"box-card cus-box-card pr h-100",shadow:"hover"},{default:l(()=>[s(b,{animated:"",throttle:200,loading:a.user===null},ne({template:l(()=>[s(b,{rows:8})]),_:2},[a.user?{name:"default",fn:l(()=>{var h,y,x,_,w;return[e("div",Ae,[I((p(),$("div",null,[s(f,{class:"no-select",src:a.user.avatar,size:100},null,8,["src"])])),[[m]]),e("div",Be,[e("div",Le,v(a.user.nickname),1)]),e("p",qe,v(a.user.description),1),Ne,e("div",Ye,[e("div",Fe,[e("div",ze,[s(i,{name:"genderless-line",color:"var(--primary-color)"}),Qe]),e("span",null,v(d(K)[a.user.gender]||"保密"),1)]),e("div",Re,[e("div",Ge,[s(i,{name:"mail-line",color:"var(--primary-color)"}),He]),e("span",null,v(a.user.email||"无"),1)]),e("div",Te,[e("div",Pe,[s(i,{name:"award-line",color:"var(--primary-color)"}),Je]),e("span",null,v(a.user.title||"无"),1)]),e("div",Oe,[e("div",We,[s(i,{name:"wechat-line",color:"var(--primary-color)"}),Ke]),e("span",null,v(((h=a.user.json)==null?void 0:h.wechat)||"无"),1)]),e("div",Xe,[e("div",Ze,[s(i,{name:"qq-line",color:"var(--primary-color)"}),es]),e("span",null,v(((y=a.user.json)==null?void 0:y.qq)||"无"),1)]),e("div",ss,[e("div",os,[s(i,{name:"bilibili-line",color:"var(--primary-color)"}),ts]),(x=a.user.json)!=null&&x.bilibili?(p(),g(o,{key:0,href:(_=a.user.json)==null?void 0:_.bilibili,type:"primary",target:"_blank"},{default:l(()=>[k("B站主页")]),_:1},8,["href"])):(p(),$("span",ls,"无"))]),e("div",as,[e("div",ns,[s(i,{name:"github-line",color:"var(--primary-color)"}),is]),(w=a.user.json)!=null&&w.github?(p(),g(o,{key:0,type:"primary"},{default:l(()=>[k("Github主页")]),_:1})):(p(),$("span",rs,"无"))])]),cs,e("div",ds,[ms,e("span",null,v(d(E)(a.user.create_time,"YYYY-MM-DD HH:mm")),1)]),e("div",ps,[us,e("span",null,v(d(E)(a.user.login_time,"YYYY-MM-DD HH:mm")),1)])])]}),key:"0"}:void 0]),1032,["loading"])]),_:1})),[[r]])}}}),lo=V({__name:"detail",setup(u){const a=me(),t=pe(),b=Z();ee();const f=C({user:null}),i={fetchData:async()=>{const{code:o,data:n}=await M.one({id:a.params.id});o===200?((!(n!=null&&n.json)||typeof(n==null?void 0:n.json)!="object")&&(n.json={}),f.user=n,ue(`用户详情-${n.nickname}`)):t.push({name:"admin-404"})}};return ie(()=>{i.fetchData()}),(o,n)=>{const m=_s,r=H,h=De,y=ke,x=G;return p(),g(x,{gutter:20,class:"admin-user-detail-wrapper"},{default:l(()=>{var _;return[s(r,{span:24,lg:8,md:24,class:"mb-2"},{default:l(()=>[s(m,{user:d(f).user},null,8,["user"])]),_:1}),s(r,{span:24,lg:16,md:24,class:"mb-2"},{default:l(()=>[s(h,{user:d(f).user},null,8,["user"])]),_:1}),parseInt(d(a).params.id)==((_=d(b).user)==null?void 0:_.id)?(p(),g(r,{key:0,span:24},{default:l(()=>[d(f).user?(p(),g(y,{key:0,value:d(f).user,"onUpdate:value":n[0]||(n[0]=w=>d(f).user=w)},null,8,["value"])):j("",!0)]),_:1})):j("",!0)]}),_:1})}}});export{lo as default};
