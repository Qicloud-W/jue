import{L as S,F as W,a as P,a5 as U,G as h,b as E}from"./element-plus-DEgQ78-a.js";import{_ as I}from"./InputUpload.vue_vue_type_style_index_0_lang-B-6SKlPI.js";import{_ as k}from"./CommonSelect-BPJDZPOW.js";import{e as C,l as N,a as F,n as V,B as j,c as B,d as M}from"./index-CYWUNeU5.js";import{s as $}from"./pinia-DsZbUfLd.js";import{m as R,n as z}from"./options-BvRdR4NQ.js";import{d as O,m as T,o as H,c as J,W as t,O as s,a as n,u as e,bn as L,bl as G}from"./@vue-AVcRlItG.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-D7ajE0Qg.js";import"./clipboard-CJr-i2j9.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./@vueuse-80B0Z04t.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./vue-router-MJGgZ6ro.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";const r=c=>(L("data-v-cb11bc6f"),c=c(),G(),c),q={class:"flex-yc g-2"},D=r(()=>n("span",null,"PWA配置",-1)),K={class:"pwa-config-form"},Q={class:"pt-2 flex-end"},X=r(()=>n("span",{class:"px-1"},"保存",-1)),Y={class:"flex-yc g-2"},Z=r(()=>n("span",null,"渐进式Web应用（PWA）",-1)),ee=r(()=>n("p",{class:"fs-15 text-color lh-15"}," 渐进式 Web 应用（Progressive Web App，PWA）是一个使用 web 平台技术构建的应用程序，但它提供的用户体验就像一个特定平台的应用程序。 它像网站一样，PWA 可以通过一个代码库在多个平台和设备上运行。它也像一个特定平台的应用程序一样，可以安装在设备上，可以离线和在后台运行，并且可以与设备和其他已安装的应用程序集成。 ",-1)),oe=r(()=>n("p",{class:"fs-15 text-color lh-15 mt-1"}," PWA 它不是特指某一项技术，而是应用多项技术来改善用户体验的 Web App，其核心技术包括 Web App Manifest，Service Worker，Web Push 等，用户体验才是 PWA 的核心。主要特点如下： ",-1)),ae=r(()=>n("ul",{class:"text-color lh-15 fs-15 mt-1 pl-3"},[n("li",null,"可靠 - 即使在网络不稳定甚至断网的环境下，也能瞬间加载并展现"),n("li",null,"用户体验 - 快速响应，具有平滑的过渡动画及用户操作的反馈"),n("li",null," 用户黏性 - 和 Native App 一样，可以被添加到桌面，能接受离线通知，具有沉浸式的用户体验 ")],-1)),te=O({__name:"pwa",setup(c){const A=C(),f=N(),{pwa:o}=$(A),d=T({loading:!1,dispaly_options:R,open_options:z}),_={handleSave:async()=>{d.loading=!0;const m=await F.save({key:"config:pwa",value:"PWA主题配置",json:JSON.stringify(o.value)});d.loading=!1,V(m,"配置成功",`配置失败：${m.msg}`)},handleUpload:async()=>{const m=new Blob([JSON.stringify(o.value.manifest)],{type:"application/json"}),a=new File([m],"manifest.webmanifest",{type:m.type}),p=await j.upload(a,"pwa","manifest");p.code===200?(o.value.manifest_url=p.data.path,_.handleSave()):V(p,"配置成功",`配置文件上传失败：${p.msg}`)}};return(m,a)=>{const p=B,b=k,i=W,u=P,v=U,g=I,x=h,y=E,w=S;return H(),J("div",null,[t(w,{class:"box-card cus-box-card mb-2",shadow:"never"},{header:s(()=>[n("div",q,[t(p,{name:"config",size:"20"}),D])]),default:s(()=>[t(x,{model:e(o).manifest,"label-position":"top"},{default:s(()=>[n("div",K,[t(i,{label:"启用PWA"},{default:s(()=>[t(b,{class:"w-100",options:e(d).open_options,value:e(o).open,"onUpdate:value":a[0]||(a[0]=l=>e(o).open=l)},null,8,["options","value"])]),_:1}),t(i,{label:"显示模式"},{default:s(()=>[t(b,{class:"w-100",options:e(d).dispaly_options,value:e(o).manifest.display,"onUpdate:value":a[1]||(a[1]=l=>e(o).manifest.display=l)},null,8,["options","value"])]),_:1}),t(i,{label:"应用名称"},{default:s(()=>[t(u,{modelValue:e(o).manifest.name,"onUpdate:modelValue":a[2]||(a[2]=l=>e(o).manifest.name=l),clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"应用简称"},{default:s(()=>[t(u,{modelValue:e(o).manifest.short_name,"onUpdate:modelValue":a[3]||(a[3]=l=>e(o).manifest.short_name=l),clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"启动URL"},{default:s(()=>[t(u,{modelValue:e(o).manifest.start_url,"onUpdate:modelValue":a[4]||(a[4]=l=>e(o).manifest.start_url=l),clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"导航范围"},{default:s(()=>[t(u,{modelValue:e(o).manifest.scope,"onUpdate:modelValue":a[5]||(a[5]=l=>e(o).manifest.scope=l),clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"主题色"},{default:s(()=>[t(v,{modelValue:e(o).manifest.theme_color,"onUpdate:modelValue":a[6]||(a[6]=l=>e(o).manifest.theme_color=l),onActiveChange:a[7]||(a[7]=l=>e(o).manifest.theme_color=l||"#2481FA")},null,8,["modelValue"])]),_:1}),t(i,{label:"背景色"},{default:s(()=>[t(v,{class:"w-100",modelValue:e(o).manifest.background_color,"onUpdate:modelValue":a[8]||(a[8]=l=>e(o).manifest.background_color=l),onActiveChange:a[9]||(a[9]=l=>e(o).manifest.background_color=l||"#2481FA")},null,8,["modelValue"])]),_:1}),t(i,{label:"图标192x192"},{default:s(()=>[t(g,{clearable:"",accept:[".jpg",".png",".jpeg",".svg",".webp"],path:`${e(f).env.INIS_APP_THEME_NAME}/pwa`,value:e(o).manifest.icons[0].src,"onUpdate:value":a[10]||(a[10]=l=>e(o).manifest.icons[0].src=l)},null,8,["accept","path","value"])]),_:1}),t(i,{label:"图标512x512"},{default:s(()=>[t(g,{clearable:"",accept:[".jpg",".png",".jpeg",".svg",".webp"],path:`${e(f).env.INIS_APP_THEME_NAME}/pwa`,value:e(o).manifest.icons[1].src,"onUpdate:value":a[11]||(a[11]=l=>e(o).manifest.icons[1].src=l)},null,8,["accept","path","value"])]),_:1})]),t(i,{label:"应用描述"},{default:s(()=>[t(u,{modelValue:e(o).manifest.description,"onUpdate:modelValue":a[12]||(a[12]=l=>e(o).manifest.description=l),type:"textarea",placeholder:"应用描述...",autosize:{minRows:4,maxRows:8}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),n("div",Q,[t(y,{type:"primary",loading:e(d).loading,onClick:_.handleUpload},{default:s(()=>[X]),_:1},8,["loading","onClick"])])]),_:1}),t(w,{class:"box-card cus-box-card",shadow:"never"},{header:s(()=>[n("div",Y,[t(p,{name:"web",size:"20"}),Z])]),default:s(()=>[ee,oe,ae]),_:1})])}}}),$e=M(te,[["__scopeId","data-v-cb11bc6f"]]);export{$e as default};
