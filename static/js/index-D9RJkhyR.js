import{c as I,f as L,h as $,d as V}from"./index-CYWUNeU5.js";import{L as B,e as M,M as N,N as O,O as T,P as j}from"./element-plus-DEgQ78-a.js";import{_ as R}from"./Contribution-CxGYvKLW.js";import{p as y}from"./vueuse-CTCWISgP.js";import{d as C,m as Y,l as z,o as l,M as x,O as i,a as _,W as n,u as a,i as F,af as U,c as u,al as P,V as b,U as g,aa as w,j as W,T as q,bn as G,bl as H}from"./@vue-AVcRlItG.js";import"./pinia-DsZbUfLd.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./@vueuse-80B0Z04t.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./clipboard-CJr-i2j9.js";import"./vue-router-MJGgZ6ro.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./dayjs-D7ajE0Qg.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";const J={class:"flex-yc g-2"},K=_("span",null,"文章日历",-1),Q={class:"flex-center h-100"},X=C({__name:"ArchivesChart",props:{data:{}},setup(p){const o=p,e=Y({contribution_data:{},year_list:[]}),f=["var(--theme-opacity-color-5)","var(--theme-opacity-color-7)","var(--theme-opacity-color-9)","var(--theme-color)"],s={fetchData:()=>{s.getArticleContribution()},getArticleContribution:()=>{if(e.contribution_data={},o.data&&o.data.length>0){o.data.map(t=>y(t.create_time,"YYYY-MM-DD")).forEach(t=>{e.contribution_data[t]?e.contribution_data[t].level++:e.contribution_data[t]={level:1}});for(const t in e.contribution_data)e.contribution_data[t].text=`发布文章 ${e.contribution_data[t].level} 篇`,e.contribution_data[t].level=s.getLevel(e.contribution_data[t].level);e.year_list=o.data.map(t=>parseInt(y(t.create_time,"YYYY"))).filter((t,r,c)=>c.indexOf(t)===r).sort((t,r)=>r-t)}},getLevel:t=>t===1?0:t===2?1:t===3?2:3};return z(()=>{o.data&&s.fetchData()}),(t,r)=>{const c=I,m=R,h=B;return l(),x(h,{class:"box-card archive-chart-wrapper card-bg br-5 cus-box-card flex-column h-100",shadow:"never"},{header:i(()=>[_("div",J,[n(c,{name:"calendar",size:"18"}),K])]),default:i(()=>[_("div",Q,[n(m,{dataSources:a(e).contribution_data,size:11,yearList:a(e).year_list,colors:f},null,8,["dataSources","yearList"])])]),_:1})}}}),Z=p=>(G("data-v-1f8b06e0"),p=p(),H(),p),tt={class:"page-archives-wrap w-100"},et={class:"card-bg br-5 p-2 mt-2"},at={class:"title-color fw-500 mb-2"},ot=Z(()=>_("div",{class:"split-line mb-1"},null,-1)),rt={class:"archive-item my5"},it={class:"disib mr-1",style:{width:"40px"}},nt=C({__name:"index",setup(p){const o=F(0),e=Y({data:null,article:null}),f={fetchData:async()=>{const{code:s,data:t}=await L.column({field:"id,create_time,title,",order:"create_time desc"});s===200?(e.data=t,e.article=f.groupArticlesByYear(t)):e.data=[]},groupArticlesByYear:s=>s.reduce((t,r)=>{const m=new Date(r.create_time*1e3).getFullYear().toString();return t[m]||(t[m]=[]),t[m].push(r),t},{})};return f.fetchData(),(s,t)=>{const r=X,c=M,m=U("RouterLink"),h=N,D=O,E=T,S=j,A=$;return l(),u("div",tt,[n(r,{data:a(e).data},null,8,["data"]),_("div",et,[n(c,{animated:"",loading:a(e).data===null},P({template:i(()=>[n(c,{rows:10})]),_:2},[a(e).data&&a(e).article?{name:"default",fn:i(()=>[Object.keys(a(e).article).length?(l(),u(b,{key:0},[_("div",at,"全部文章"+g(a(e).data.length),1),n(S,null,{default:i(()=>[(l(!0),u(b,null,w(Object.keys(a(e).article).reverse(),(v,k)=>(l(),x(E,{key:k,type:"primary",color:"var(--theme-color)",hollow:!0},{default:i(()=>[n(D,{modelValue:a(o),"onUpdate:modelValue":t[0]||(t[0]=d=>W(o)?o.value=d:null)},{default:i(()=>[n(h,{title:`${v}年【${a(e).article[v].length||0}】`,name:k},{default:i(()=>[ot,(l(!0),u(b,null,w(a(e).article[v],d=>(l(),u("div",rt,[n(m,{class:"trf text-color theme-hover",to:{name:"front-article-detail",params:{id:d.id}}},{default:i(()=>[_("span",it,g(a(y)(d.create_time,"MM-DD")),1),q(g(d.title),1)]),_:2},1032,["to"])]))),256))]),_:2},1032,["title","name"])]),_:2},1032,["modelValue"])]),_:2},1024))),128))]),_:1})],64)):(l(),x(A,{key:1}))]),key:"0"}:void 0]),1032,["loading"])])])}}}),Rt=V(nt,[["__scopeId","data-v-1f8b06e0"]]);export{Rt as default};
