import{E as n,k,a0 as M,a as T}from"./element-plus-DEgQ78-a.js";import{u as $,_ as L}from"./index-CYWUNeU5.js";import{d as v,i as R,k as C,o as h,M as b,O as r,J as N,u as V,j as z,bf as A,bF as j,W as f,Q as P}from"./@vue-AVcRlItG.js";const W=v({__name:"UploadFile",props:{multiple:{type:Boolean,default:!0},accept:{default:void 0},disabled:{type:Boolean,default:!1},limit:{default:void 0},path:{default:void 0},listType:{default:void 0},fileList:{default:void 0}},emits:["upload","uploadList"],setup(p,{emit:s}){const l=`${INIS.api.endsWith("/")?INIS.api:INIS.api+"/"}api/file/upload`,o=p,d=R(),u={Authorization:$().token},t=C({get(){return o.fileList},set(e){return e}}),m=s,F=e=>{},g=(e,a)=>{},_=(e,a,i)=>{e.code===200?(n.success(e.msg),m("upload",e.data.path,d.value),m("uploadList",i)):n.error(e.msg)},y=(e,a,i)=>{n.error("上传失败,请检查后端存储配置是否最正常")},I=(e,a,i)=>{},U=(e,a)=>{},w=(e,a)=>{n.warning(`最多只能上传${o.limit}个文件`)},B=e=>{},S=(e,a)=>k.confirm(`确定删除文件 ${e.name} ?`,"删除文件",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>!0,()=>!1);return(e,a)=>{const i=M;return h(),b(i,{ref_key:"uploadRef",ref:d,"file-list":V(t),"onUpdate:fileList":a[0]||(a[0]=E=>z(t)?t.value=E:null),class:"upload",disabled:e.disabled,action:l,headers:u,multiple:e.multiple,limit:e.limit,listType:e.listType,accept:e.accept,"on-preview":F,"on-remove":g,"on-success":_,"on-error":y,"on-progress":I,"on-change":U,"on-exceed":w,"before-upload":B,"before-remove":S,data:{path:e.path||""}},{default:r(()=>[N(e.$slots,"default")]),_:3},8,["file-list","disabled","multiple","limit","listType","accept","data"])}}}),q=v({__name:"InputUpload",props:A({path:{},disabled:{type:Boolean},accept:{}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(p){const s=j(p,"value");return(l,o)=>{const d=L,c=W,u=T;return h(),b(u,{type:"text",modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=t=>s.value=t),disabled:l.disabled,placeholder:"请输入图片url或上传",class:"upload-input"},{append:r(()=>[f(c,{class:P(["input-upload-wrapper hvco flex-center",{disabled:l.disabled}]),disabled:l.disabled,accept:l.accept?l.accept.join(","):void 0,path:l.path,onUpload:o[0]||(o[0]=t=>s.value=t)},{default:r(()=>[f(d,{class:"upload-icon white-color",size:"18",name:"upload-2-fill"})]),_:1},8,["disabled","class","accept","path"])]),_:1},8,["modelValue","disabled"])}}});export{q as _};
