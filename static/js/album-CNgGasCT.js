import{v as I,_ as z,h as B,d as C}from"./index-CYWUNeU5.js";import{e as V}from"./element-plus-DEgQ78-a.js";import{d as E,i as N,m as R,k as A,w as F,ar as u,o,c as i,W as m,al as W,u as e,O as f,P as g,a,V as $,aa as L,X as M,S as O,M as P,bn as X,bl as j}from"./@vue-AVcRlItG.js";import"./wc-waterfall-BFfXSEeD.js";import{b as q,a as G}from"./@vueuse-80B0Z04t.js";import{a as H}from"./vue-router-MJGgZ6ro.js";import"./pinia-DsZbUfLd.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./clipboard-CJr-i2j9.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./dayjs-D7ajE0Qg.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";const n=r=>(X("data-v-4edea9e8"),r=r(),j(),r),J={key:0},K=["cols"],Q=["src"],T={class:"loading-wrap flex-yc flex-center my-2 fs-12 muted-color"},U=n(()=>a("span",null,"加载中...",-1)),Y={key:0,class:"mb-2 mt-4 flex-yc flex-center fs-12 muted-color"},Z=n(()=>a("div",{class:"split"},null,-1)),tt=n(()=>a("span",{class:"mx-1"},"我是有底线的",-1)),et=n(()=>a("div",{class:"split"},null,-1)),at=[Z,tt,et],ot=E({__name:"album",setup(r){const{width:s}=q(),h=H(),p=N(),{arrivedState:v}=G(p),t=R({page:1,limit:12,all_page:1,loading:!1,data:null}),d={fetchData:async()=>{const{code:l,data:c}=await I.all({page:t.page,limit:t.limit,where:`group = ${h.params.id}`});l===200?(t.data||(t.data=[]),t.data=t.data.concat(c.data),t.all_page=c.page):t.data=t.data||[]}},w=A(()=>s.value>1400?5:s.value>1200&&s.value<=1400?4:s.value>800&&s.value<=1200?3:2);return F(v,async l=>{l.bottom&&(t.page+=1,t.loading=!0,t.page<=t.all_page&&await d.fetchData(),t.loading=!1)}),d.fetchData(),(l,c)=>{const _=V,y=z,b=B,k=u("imgbox"),x=u("lazy");return o(),i("div",{ref_key:"galleryRef",ref:p,class:"album-gallery-list"},[m(_,{animated:"",throttle:200,loading:e(t).data===null},W({template:f(()=>[m(_,{rows:12})]),_:2},[e(t).data?{name:"default",fn:f(()=>[e(t).data.length?g((o(),i("div",J,[a("wc-waterfall",{gap:10,cols:e(w)},[(o(!0),i($,null,L(e(t).data,(S,D)=>(o(),i("div",{class:"album-item-wrap trf br-5",key:D},[a("img",{class:"br-5 trf wh-100",src:S.image},null,8,Q)]))),128))],8,K),g(a("div",T,[m(y,{name:"loader-2-line ",size:"14",class:"mr5 spinner"}),U],512),[[M,e(t).loading]]),e(t).page>e(t).all_page?(o(),i("div",Y,at)):O("",!0)])),[[k],[x]]):(o(),P(b,{key:1}))]),key:"0"}:void 0]),1032,["loading"])],512)}}}),Wt=C(ot,[["__scopeId","data-v-4edea9e8"]]);export{Wt as default};
