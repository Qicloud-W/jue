import{L as Ee,e as A,a as Le,F as Te,G as Me,b as Ye,k as He,f as me,l as qe,m as Re,n as Ae,E as Be,p as Ne,q as Pe}from"./element-plus-DEgQ78-a.js";import{j as Qe,D as oe,x as ye,E as Je,c as Oe,h as ne,_ as T,d as V,u as $e,F as xe,n as De,l as Se,m as Ie,y as Ge,w as ge,G as We,z as Ce,f as je,e as ze,k as Xe}from"./index-CYWUNeU5.js";import{d as E,m as M,w as le,o as l,M as D,O as m,a as e,W as a,al as B,u as s,c as p,V as F,aa as ce,S as $,U as _,P as L,X as ie,bn as Y,bl as H,T as we,k as ke,af as Ue,ar as Fe,i as Ke,bg as Ze,j as es}from"./@vue-AVcRlItG.js";import{u as fe,a as N}from"./vue-router-MJGgZ6ro.js";import{a as re,c as be}from"./@vueuse-80B0Z04t.js";import{_ as ss}from"./CommonSelect-BPJDZPOW.js";import{_ as ts}from"./InputUpload.vue_vue_type_style_index_0_lang-B-6SKlPI.js";import{s as as}from"./pinia-DsZbUfLd.js";import{g as os}from"./options-BvRdR4NQ.js";import{p as ue}from"./vueuse-CTCWISgP.js";import{u as ns}from"./chart-DBxS_7Nw.js";import{_ as Ve}from"./Image-CtzcM27r.js";import{_ as ls}from"./CrossImages-BztQzEcy.js";import{_ as cs}from"./LevelCard-DHbTnBuq.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-D7ajE0Qg.js";import"./clipboard-CJr-i2j9.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";import"./LevelBadge-cCdUF6Zc.js";const de=h=>(Y("data-v-f284333d"),h=h(),H(),h),is={class:"flex-yc g-2"},rs=de(()=>e("span",null,"经验足迹",-1)),ds={key:0,class:"user-trace-list"},_s={class:"flex g-2"},ps={class:"title-color fs-14"},us={class:"fs-12 mt5 light-text word-break"},ms={class:"mr5"},fs=["onClick"],hs={key:1,class:"fs-12 theme-color word-break mx5 curp hvco"},vs={class:"exp-value douyu fs-28"},gs={class:"loading-wrap flex-yc flex-center my-2 fs-12 muted-color"},ys=de(()=>e("span",null,"加载中...",-1)),$s={key:2,class:"mb-2 mt-4 flex-yc flex-center fs-12 muted-color"},ws=de(()=>e("div",{class:"split"},null,-1)),ks=de(()=>e("span",{class:"mx-1"},"我是有底线的",-1)),bs=de(()=>e("div",{class:"split"},null,-1)),xs=[ws,ks,bs],Ds=E({__name:"FrontUserTrace",setup(h){const f=fe(),{arrivedState:g}=re(window),o=N(),i=M({page:1,all_page:1,limit:12,loading:!1,data:null}),n={fetchData:async()=>{const{code:t,data:w}=await Qe.all({page:i.page,limit:i.limit,where:[["uid","=",o.params.id||0]]});t===200?(i.data||(i.data=[]),i.data=i.data.concat(w.data),i.all_page=w.page):i.data=i.data||[]}};return le(g,async t=>{t.bottom&&(i.page+=1,i.loading=!0,i.page<=i.all_page&&await n.fetchData(),i.loading=!1)}),n.fetchData(),(t,w)=>{const d=Oe,r=A,u=ne,y=T,v=Ee;return l(),D(v,{class:"box-card user-trace-wrap card-bg br-5 cus-box-card",shadow:"never"},{header:m(()=>[e("div",is,[a(d,{name:"foot",size:"20"}),rs])]),default:m(()=>[a(r,{animated:"",loading:s(i).data===null},B({template:m(()=>[a(r,{rows:6})]),_:2},[s(i).data?{name:"default",fn:m(()=>[s(i).data.length?(l(),p("ul",ds,[(l(!0),p(F,null,ce(s(i).data,c=>{var x,S,I,k,C,b;return l(),p("li",{key:c.id,class:"p-1 br-5 mb-1 flex-yc flex-sb"},[e("div",_s,[s(oe)[c.type]?(l(),D(d,{key:0,name:s(oe)[c.type].icon,size:"32"},null,8,["name"])):$("",!0),e("div",null,[e("span",ps,_(s(oe)[c.type].name)+"奖励 ",1),e("div",us,[e("span",ms,_(s(ye)(c.create_time*1e3)),1),e("span",null,_((x=s(oe)[c.type])==null?void 0:x.text)+_(s(Je)[c.bind_type]||""),1),c.bind_type==="article"&&((S=c.result.article)!=null&&S.id)?(l(),p("span",{key:0,class:"fs-12 theme-color word-break curp hvco",onClick:z=>s(f).push({name:"front-article-detail",params:{id:c.result.article.id}})}," 《"+_((I=c.result.article)==null?void 0:I.title)+"》 ",9,fs)):$("",!0),c.bind_type==="page"&&((k=c.result.page)!=null&&k.id)?(l(),p("span",hs,_((C=c.result.page)==null?void 0:C.title),1)):$("",!0)])])]),e("span",vs," +"+_((b=s(oe)[c.type])==null?void 0:b.value),1)])}),128))])):(l(),D(u,{key:1})),L(e("div",gs,[a(y,{name:"loader-2-line ",size:"14",class:"mr5 spinner"}),ys],512),[[ie,s(i).loading]]),s(i).page>s(i).all_page?(l(),p("div",$s,xs)):$("",!0)]),key:"0"}:void 0]),1032,["loading"])]),_:1})}}}),Ss=V(Ds,[["__scopeId","data-v-f284333d"]]),Is={class:"user-config-tab-wrap"},Cs={class:"user-config-form"},js={class:"user-config-form"},zs={class:"user-config-form"},Us={class:"tr mt-3 w-100"},Fs=E({__name:"FrontUserConfig",setup(h){const f=$e(),{user:g}=as(f),o=M({loading:!1,gender_options:os}),i={handleSubmit:async()=>{o.loading=!0;try{const n={...g.value};n.json=n.json??JSON.stringify(n.json);const t=await xe.save(n);De(t)}finally{o.loading=!1}}};return(n,t)=>{const w=Le,d=Te,r=ts,u=ss,y=Me,v=Ye;return l(),p("div",Is,[s(g)?(l(),D(y,{key:0,model:s(g),"label-position":"left","label-width":"40"},{default:m(()=>[e("div",Cs,[a(d,{label:"昵称"},{default:m(()=>[a(w,{modelValue:s(g).nickname,"onUpdate:modelValue":t[0]||(t[0]=c=>s(g).nickname=c),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),a(d,{label:"头像"},{default:m(()=>[a(r,{accept:[".jpg",".png",".jpeg",".svg",".webp"],path:`user/avatar/${s(g).id}`,value:s(g).avatar,"onUpdate:value":t[1]||(t[1]=c=>s(g).avatar=c)},null,8,["accept","path","value"])]),_:1})]),e("div",js,[a(d,{label:"邮箱"},{default:m(()=>[a(w,{modelValue:s(g).email,"onUpdate:modelValue":t[2]||(t[2]=c=>s(g).email=c),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),a(d,{label:"性别"},{default:m(()=>[a(u,{teleported:!1,value:s(g).gender,"onUpdate:value":t[3]||(t[3]=c=>s(g).gender=c),options:s(o).gender_options},null,8,["value","options"])]),_:1})]),e("div",zs,[a(d,{label:"QQ"},{default:m(()=>[a(w,{modelValue:s(g).json.qq,"onUpdate:modelValue":t[4]||(t[4]=c=>s(g).json.qq=c),placeholder:"请输入QQ号"},null,8,["modelValue"])]),_:1}),a(d,{label:"微信"},{default:m(()=>[a(w,{modelValue:s(g).json.wechat,"onUpdate:modelValue":t[5]||(t[5]=c=>s(g).json.wechat=c)},null,8,["modelValue"])]),_:1}),a(d,{label:"背景"},{default:m(()=>[a(r,{accept:[".jpg",".png",".jpeg",".svg",".webp"],value:s(g).json.cover,"onUpdate:value":t[6]||(t[6]=c=>s(g).json.cover=c)},null,8,["accept","value"])]),_:1})]),a(d,{label:"描述"},{default:m(()=>[a(w,{modelValue:s(g).description,"onUpdate:modelValue":t[7]||(t[7]=c=>s(g).description=c),type:"textarea",autosize:{minRows:3,maxRows:12},placeholder:"请输入简介"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):$("",!0),e("div",Us,[a(v,{loading:s(o).loading,type:"primary",onClick:i.handleSubmit},{default:m(()=>[we(" 提交保存 ")]),_:1},8,["loading","onClick"])])])}}}),Vs=V(Fs,[["__scopeId","data-v-254bbec4"]]),q=h=>(Y("data-v-675c20a2"),h=h(),H(),h),Es={class:"comment-list-wrapper pt-1"},Ls=["id"],Ts={class:"flex g-2"},Ms={class:"comment-info-wrap w-100"},Ys={class:"flex-sb flex-yc"},Hs={class:"flex-yc g-1 w-fit"},qs={class:"title-color theme-hover fs-15"},Rs={class:"flex-yc fs-14 w-100"},As=q(()=>e("span",null,"查看详情",-1)),Bs={class:"flex-yc error-color fs-14"},Ns=q(()=>e("span",null,"删除评论",-1)),Ps=["innerHTML"],Qs={class:"flex-yc fs-12 no-select muted-color mb-2 g-1"},Js=q(()=>e("span",null,"·",-1)),Os={key:0},Gs={key:1},Ws={key:0,class:"split-line mb-2"},Xs={class:"loading-wrap flex-yc flex-center my-2 fs-12 muted-color"},Ks=q(()=>e("span",null,"加载中...",-1)),Zs={key:0,class:"my-2 flex-yc flex-center fs-12 muted-color"},et=q(()=>e("div",{class:"split"},null,-1)),st=q(()=>e("span",{class:"mx-1"},"我是有底线的",-1)),tt=q(()=>e("div",{class:"split"},null,-1)),at=[et,st,tt],ot=E({__name:"FrontUserComment",setup(h){const f=Se(),{arrivedState:g}=re(window),o=fe(),i=N(),n=$e(),t=M({pid:0,page:1,limit:12,count:0,all_page:1,loading:!1,data:null}),w=ke(()=>{var r,u;return((u=(r=f.pageList)==null?void 0:r.find(y=>y.key==="cross"))==null?void 0:u.id)||0}),d={fetchData:async()=>{t.pid=0;const{code:r,data:u}=await ge.all({page:t.page,limit:t.limit,where:[["uid","=",i.params.id||0],["bind_id","<>",w.value]]});r===200?(t.data||(t.data=[]),t.data=t.data.concat(u.data),t.count=u.count,t.all_page=u.page):t.data=t.data||[]},goDetail:(r,u,y,v)=>{r==="article"&&y&&o.push({name:"front-article-detail",params:{id:u},query:{id:`article-comment-${y}`}}),r==="page"&&y&&v&&o.push({name:We[v]||"front-page-content",params:{key:v},query:{id:`article-comment-${y}`}})},dandleDelete:r=>{He.confirm("确定删除这条评论吗?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"error",autofocus:!1,showClose:!1}).then(async()=>{var y;const u=await ge.remove([r]);De(u),u.code===200&&t.data&&(t.data=(y=t.data)==null?void 0:y.filter(v=>v.id!==r))}).catch(()=>{})}};return le(g,async r=>{r.bottom&&(t.page+=1,t.loading=!0,t.page<=t.all_page&&await d.fetchData(),t.loading=!1)}),d.fetchData(),(r,u)=>{const y=A,v=me,c=Ce,x=T,S=qe,I=Re,k=Ae,C=ne;return l(),p("div",Es,[a(y,{animated:"",throttle:200,loading:s(t).data===null},B({template:m(()=>[a(y,{rows:8})]),_:2},[s(t).data?{name:"default",fn:m(()=>[s(t).data.length?(l(),p(F,{key:0},[(l(!0),p(F,null,ce(s(t).data,(b,z)=>{var j,P,Q,J,O,G,W,X,K,Z,ee,se;return l(),p("div",{class:"comment-item-wrap",id:`article-comment-${b.id}`,key:z},[e("div",Ts,[a(v,{class:"flex-shrink-0 curp",src:(P=(j=b.result)==null?void 0:j.author)==null?void 0:P.avatar,size:32},null,8,["src"]),e("div",Ms,[e("div",Ys,[e("div",Hs,[e("span",qs,_(((J=(Q=b.result)==null?void 0:Q.author)==null?void 0:J.nickname)||"未知用户"),1),a(c,{size:14,value:((K=(X=(W=(G=(O=b==null?void 0:b.result)==null?void 0:O.author)==null?void 0:G.result)==null?void 0:W.level)==null?void 0:X.current)==null?void 0:K.value)||0},null,8,["value"])]),a(k,{teleported:!1},{dropdown:m(()=>[a(I,null,{default:m(()=>{var te;return[a(S,{class:"mb-1 py-1",disabled:b.bind_id===s(w),onClick:_e=>{var ae,pe;return d.goDetail(b.bind_type,b.bind_id,b.id,(pe=(ae=b.result)==null?void 0:ae.page)==null?void 0:pe.key)}},{default:m(()=>[e("div",Rs,[a(x,{name:"send-to-back"}),As])]),_:2},1032,["disabled","onClick"]),s(n).hasLogin&&((te=s(n).user)==null?void 0:te.id.toString())===s(i).params.id?(l(),D(S,{key:0,onClick:_e=>d.dandleDelete(b.id)},{default:m(()=>[e("div",Bs,[a(x,{name:"delete-bin-6-line"}),we(),Ns])]),_:2},1032,["onClick"])):$("",!0)]}),_:2},1024)]),default:m(()=>[a(x,{class:"curp theme-hover trf",name:"more-fill"})]),_:2},1024)]),e("div",{class:"comment-content article-content",innerHTML:s(Ie)(b.content)},null,8,Ps),e("div",Qs,[e("span",null,_(s(ye)(b.create_time||0)),1),Js,e("span",null,_(s(Ge)(b.agent)||"未知设备"),1),(Z=b.json)!=null&&Z.area?(l(),p("span",Os,"·")):$("",!0),(ee=b.json)!=null&&ee.area?(l(),p("span",Gs,_((se=b.json)==null?void 0:se.area),1)):$("",!0)])])]),z!==s(t).data.length-1?(l(),p("div",Ws)):$("",!0)],8,Ls)}),128)),L(e("div",Xs,[a(x,{name:"loader-2-line ",size:"14",class:"mr5 spinner"}),Ks],512),[[ie,s(t).loading]]),s(t).page>s(t).all_page?(l(),p("div",Zs,at)):$("",!0)],64)):(l(),D(C,{key:1}))]),key:"0"}:void 0]),1032,["loading"])])}}}),nt=V(ot,[["__scopeId","data-v-675c20a2"]]),U=h=>(Y("data-v-dd6dd699"),h=h(),H(),h),lt={class:"title-color fw-600 trf"},ct={class:"flex-yc muted-color g-1 mt-1"},it={class:"flex-yc g-1 theme-hover"},rt={class:"fs-12"},dt=U(()=>e("span",null,"·",-1)),_t={class:"fs-12"},pt={class:"flex-sb mt5 g-2"},ut=U(()=>e("div",{class:"wh-100"},[e("p",{class:"fs-14 flex-1 lh-2 text-color h-3x"},_("这个人很懒，连摘要都不写。"))],-1));const mt={class:"flex-yc g-3 fs-12 mt-1 muted-color"},ft={class:"flex-yc"},ht=U(()=>e("span",{class:"ml5"},_(0),-1)),vt={class:"flex-yc"},gt=U(()=>e("span",{class:"ml5"},_(0),-1)),yt={class:"flex-yc"},$t=U(()=>e("span",{class:"ml5"},_(0),-1)),wt={class:"flex-yc"},kt=U(()=>e("span",{class:"ml5"},_(0),-1)),bt={class:"flex-yc"},xt=U(()=>e("span",{class:"ml5"},_(0),-1)),Dt={key:0,class:"split-line my-2"},St={class:"loading-wrap flex-yc flex-center my-2 fs-12 muted-color"},It=U(()=>e("span",null,"加载中...",-1)),Ct={key:0,class:"mb-2 mt-4 flex-yc flex-center fs-12 muted-color"},jt=U(()=>e("div",{class:"split"},null,-1)),zt=U(()=>e("span",{class:"mx-1"},"我是有底线的",-1)),Ut=U(()=>e("div",{class:"split"},null,-1)),Ft=[jt,zt,Ut],Vt=E({__name:"FrontUserCollect",setup(h){const f=N(),{arrivedState:g}=re(window),o=M({page:1,limit:5,loading:!1,collect_ids:[],data:null}),i=ke(()=>{const t=(o.page-1)*o.limit,w=t+o.limit;return o.collect_ids.slice(t,w)}),n={initData:async()=>{await n.getParticipate(),n.fetchData()},getParticipate:async()=>{var d;if(f.params.id===void 0)return;const{code:t,data:w}=await ns.participate(f.params.id);t===200?o.collect_ids=((d=w.article)==null?void 0:d.collect)||[]:o.data=o.data||[]},fetchData:async()=>{if(!i.value||!i.value.length){o.data=o.data||[];return}const{code:t,data:w}=await je.column({ids:i.value,order:"create_time desc",field:"id,json,result,audit,title,abstract,views,covers,create_time",where:[["audit","=","1"]]});t===200?(o.data||(o.data=[]),o.data=o.data.concat(w)):o.data=o.data||[]}};return le(g,async t=>{i.value&&i.value.length&&t.bottom&&(o.page+=1,o.loading=!0,await n.fetchData(),o.loading=!1)}),n.initData(),(t,w)=>{const d=A,r=me,u=T,y=Ue("RouterLink"),v=ne;return l(),D(d,{animated:"",loading:s(o).data===null},B({template:m(()=>[a(d,{rows:10})]),_:2},[s(o).data?{name:"default",fn:m(()=>[s(o).data.length?(l(),p(F,{key:0},[(l(!0),p(F,null,ce(s(o).data,(c,x)=>(l(),D(y,{to:{name:"front-article-detail",params:{id:(c==null?void 0:c.id)||0}},class:"article-item-wrap curp",key:c.id},{default:m(()=>{var S,I,k,C;return[e("div",lt,_(c==null?void 0:c.title),1),e("div",ct,[e("div",it,[a(r,{src:(I=(S=c.result)==null?void 0:S.author)==null?void 0:I.avatar,size:16},null,8,["src"]),e("span",rt,_(((C=(k=c.result)==null?void 0:k.author)==null?void 0:C.nickname)||"未知用户"),1)]),dt,e("span",_t,_(s(ue)(c.create_time,"YYYY-MM-DD HH:mm")),1)]),e("div",pt,[ut,$("",!0)]),e("div",mt,[e("div",ft,[a(u,{name:"eye-line",size:"14"}),ht]),e("div",vt,[a(u,{name:"thumb-up-line",size:"14"}),gt]),e("div",yt,[a(u,{name:"message-3-line",size:"14"}),$t]),e("div",wt,[a(u,{name:"star-line",size:"14"}),kt]),e("div",bt,[a(u,{name:"share-box-line",size:"14"}),xt])]),x+1<s(o).data.length?(l(),p("div",Dt)):$("",!0)]}),_:2},1032,["to"]))),128)),L(e("div",St,[a(u,{name:"loader-2-line ",size:"14",class:"mr5 spinner"}),It],512),[[ie,s(o).loading]]),!s(i)||!s(i).length?(l(),p("div",Ct,Ft)):$("",!0)],64)):(l(),D(v,{key:1}))]),key:"0"}:void 0]),1032,["loading"])}}}),Et=V(Vt,[["__scopeId","data-v-dd6dd699"]]),he=h=>(Y("data-v-f3477017"),h=h(),H(),h),Lt={key:0,class:"audit-article block br-2 fs-12 white-color center mr5"},Tt={class:"title-color fw-600 trf"},Mt={class:"flex-yc muted-color g-1 mt-1"},Yt={class:"fs-12"},Ht={class:"flex-sb mt5 g-2"},qt={class:"wh-100"},Rt={class:"fs-14 flex-1 lh-2 text-color h-3x"},At={key:0,class:"flex-yc flex-shrink-0 overhide br-4"},Bt={class:"flex-yc g-3 fs-12 mt-1 muted-color"},Nt={class:"flex-yc"},Pt={class:"ml5"},Qt={class:"flex-yc"},Jt={class:"ml5"},Ot={class:"flex-yc"},Gt={class:"ml5"},Wt={class:"flex-yc"},Xt={class:"ml5"},Kt={class:"flex-yc"},Zt={class:"ml5"},ea={key:0,class:"split-line my-2"},sa={class:"loading-wrap flex-yc flex-center my-2 fs-12 muted-color"},ta=he(()=>e("span",null,"加载中...",-1)),aa={key:0,class:"mb-2 mt-4 flex-yc flex-center fs-12 muted-color"},oa=he(()=>e("div",{class:"split"},null,-1)),na=he(()=>e("span",{class:"mx-1"},"我是有底线的",-1)),la=he(()=>e("div",{class:"split"},null,-1)),ca=[oa,na,la],ia=E({__name:"FrontUserArticle",setup(h){const f=N(),{arrivedState:g}=re(window),o=M({page:1,limit:12,all_page:1,loading:!1,data:null}),i={initData:()=>{i.fetchData()},fetchData:async()=>{const{code:n,data:t}=await je.all({page:o.page,limit:o.limit,field:"id,json,result,title,abstract,audit,views,covers,create_time",where:[["uid","=",f.params.id||0]]});n===200?(o.data||(o.data=[]),o.data=o.data.concat(t.data),o.all_page=t.page):o.data=o.data||[]}};return le(g,async n=>{n.bottom&&(o.page+=1,o.loading=!0,o.page<=o.all_page&&await i.fetchData(),o.loading=!1)}),i.initData(),(n,t)=>{const w=A,d=Ve,r=T,u=Ue("RouterLink"),y=ne;return l(),D(w,{animated:"",loading:s(o).data===null},B({template:m(()=>[a(w,{rows:10})]),_:2},[s(o).data?{name:"default",fn:m(()=>[s(o).data.length?(l(),p(F,{key:0},[(l(!0),p(F,null,ce(s(o).data,(v,c)=>(l(),D(u,{to:{name:"front-article-detail",params:{id:v.id}},class:"article-item-wrap curp",key:v.id},{default:m(()=>{var x,S,I,k,C,b,z,j;return[e("div",null,[v.audit===1?(l(),p("span",Lt,"审")):$("",!0),e("span",Tt,_(v.title),1)]),e("div",Mt,[e("span",Yt,_(s(ue)(v.create_time,"YYYY-MM-DD HH:mm")),1)]),e("div",Ht,[e("div",qt,[e("p",Rt,_(v.abstract||"这个人很懒，连摘要都不写。"),1)]),v.covers?(l(),p("div",At,[a(d,{class:"trf wh-100 article-cover br-4",src:v.covers.split(",")[0]},null,8,["src"])])):$("",!0)]),e("div",Bt,[e("div",Nt,[a(r,{name:"eye-line",size:"14"}),e("span",Pt,_(v.views),1)]),e("div",Qt,[a(r,{name:"thumb-up-line",size:"14"}),e("span",Jt,_(((S=(x=v.result)==null?void 0:x.comment)==null?void 0:S.count)||0),1)]),e("div",Ot,[a(r,{name:"message-3-line",size:"14"}),e("span",Gt,_(((k=(I=v.result)==null?void 0:I.like)==null?void 0:k.length)||0),1)]),e("div",Wt,[a(r,{name:"star-line",size:"14"}),e("span",Xt,_(((b=(C=v.result)==null?void 0:C.collect)==null?void 0:b.length)||0),1)]),e("div",Kt,[a(r,{name:"share-box-line",size:"14"}),e("span",Zt,_(((j=(z=v.result)==null?void 0:z.share)==null?void 0:j.length)||0),1)])]),c+1<s(o).data.length?(l(),p("div",ea)):$("",!0)]}),_:2},1032,["to"]))),128)),L(e("div",sa,[a(r,{name:"loader-2-line ",size:"14",class:"mr5 spinner"}),ta],512),[[ie,s(o).loading]]),s(o).page>s(o).all_page?(l(),p("div",aa,ca)):$("",!0)],64)):(l(),D(y,{key:1}))]),key:"0"}:void 0]),1032,["loading"])}}}),ra=V(ia,[["__scopeId","data-v-f3477017"]]),ve=h=>(Y("data-v-06406857"),h=h(),H(),h),da={class:"comment-list-wrapper"},_a={class:"p-2 card-bg br-5"},pa=["id"],ua={class:"flex g-2"},ma={class:"comment-info-wrap w-100"},fa=["onClick"],ha={class:"title-color theme-hover fs-15"},va={class:"fs-12 light-text"},ga=["innerHTML"],ya={key:1,class:"cross-video-wrap mb5 br-5 overhide"},$a=["src"],wa={class:"flex-yc fs-12 no-select muted-color g-1"},ka={key:2,class:"split-line my-2"},ba={class:"loading-wrap flex-yc flex-center my-2 fs-12 muted-color"},xa=ve(()=>e("span",null,"加载中...",-1)),Da={key:0,class:"my-2 flex-yc flex-center fs-12 muted-color"},Sa=ve(()=>e("div",{class:"split"},null,-1)),Ia=ve(()=>e("span",{class:"mx-1"},"我是有底线的",-1)),Ca=ve(()=>e("div",{class:"split"},null,-1)),ja=[Sa,Ia,Ca],za={key:1,class:"p-2 br-5 card-bg flex-center"},Ua=E({__name:"FrontUserCross",setup(h){const f=N(),g=Se();ze();const{arrivedState:o}=re(window),i=fe(),n=M({pid:0,page:1,limit:12,count:0,all_page:1,loading:!1,data:null}),t=ke(()=>{var d;return(d=g.pageList)==null?void 0:d.find(r=>r.key==="cross")}),w={fetchData:async()=>{if(!t.value)return Be({type:"error",message:"动态页面不存在"});n.pid=0;const{code:d,data:r}=await ge.all({page:n.page,limit:n.limit,bind_id:t.value.id||0,bind_type:"page",where:[["uid","=",f.params.id||0],["pid","=",0],["bind_id","=",t.value.id||0]]});d===200?(n.data||(n.data=[]),n.data=n.data.concat(r.data),n.count=r.count,n.all_page=r.page):n.data=n.data||[]},findReply:(d,r,u)=>{const y=u.find(v=>v.id===d);return y&&y.uid!==r?y:null},handleRefresh:()=>{n.data=[],n.page=1,n.all_page=1,n.count=0,w.fetchData()}};return le(o,async d=>{d.bottom&&(n.page+=1,n.loading=!0,n.page<=n.all_page&&await w.fetchData(),n.loading=!1)}),w.fetchData(),(d,r)=>{const u=A,y=me,v=Ce,c=ls,x=T,S=ne,I=Fe("plyr");return l(),p("div",da,[a(u,{animated:"",throttle:0,loading:s(n).data===null},B({template:m(()=>[e("div",_a,[a(u,{rows:8})])]),_:2},[s(n).data?{name:"default",fn:m(()=>[s(n).data.length?(l(),p(F,{key:0},[(l(!0),p(F,null,ce(s(n).data,(k,C)=>{var b,z,j,P,Q,J,O,G,W,X,K,Z,ee,se,te,_e,ae;return l(),p("div",{class:"comment-item-wrap card-bg br-5",id:`article-comment-${k.id}`,key:C},[e("div",ua,[a(y,{class:"flex-shrink-0 curp",shape:"square",onClick:pe=>s(i).push({name:"front-user-detail",params:{id:k.uid}}),src:(z=(b=k.result)==null?void 0:b.author)==null?void 0:z.avatar,size:36},null,8,["onClick","src"]),e("div",ma,[e("div",{class:"flex-yc g-1 theme-hover curp w-fit",onClick:pe=>s(i).push({name:"front-user-detail",params:{id:k.uid}})},[e("span",ha,_(((P=(j=k.result)==null?void 0:j.author)==null?void 0:P.nickname)||"未知用户"),1),a(v,{size:14,value:((W=(G=(O=(J=(Q=k==null?void 0:k.result)==null?void 0:Q.author)==null?void 0:J.result)==null?void 0:O.level)==null?void 0:G.current)==null?void 0:W.value)||0},null,8,["value"])],8,fa),e("span",va,_(s(ye)(k.create_time||0)),1)])]),e("div",{class:"comment-content article-content",innerHTML:s(Ie)(k.content)},null,8,ga),(X=k.json)!=null&&X.images&&((Z=(K=k.json)==null?void 0:K.images)==null?void 0:Z.length)>0?(l(),D(c,{key:0,images:((ee=k.json)==null?void 0:ee.images)||[],class:"mb5"},null,8,["images"])):$("",!0),(se=k.json)!=null&&se.video?L((l(),p("div",ya,[e("video",{src:(te=k.json)==null?void 0:te.video},null,8,$a)])),[[I]]):$("",!0),e("div",wa,[(_e=k.json)!=null&&_e.area?(l(),p(F,{key:0},[a(x,{size:"14",name:"map-pin-2-line"}),e("span",null,_((ae=k.json)==null?void 0:ae.area),1)],64)):$("",!0)]),C<s(n).data.length-1?(l(),p("div",ka)):$("",!0)],8,pa)}),128)),L(e("div",ba,[a(x,{name:"loader-2-line ",size:"14",class:"mr5 spinner"}),xa],512),[[ie,s(n).loading]]),s(n).page>s(n).all_page?(l(),p("div",Da,ja)):$("",!0)],64)):(l(),p("div",za,[a(S,{text:"暂无动态数据"})]))]),key:"0"}:void 0]),1032,["loading"])])}}}),Fa=V(Ua,[["__scopeId","data-v-06406857"]]),R=h=>(Y("data-v-51068d04"),h=h(),H(),h),Va={key:0,class:"user-home-tab flex-yc my-1 g-4"},Ea={class:"w-100 fs-14"},La={class:"flex-yc g-1"},Ta={class:"flex-yc flex-shrink-0"},Ma=R(()=>e("span",{class:"ml5 no-select"},"头衔：",-1)),Ya={class:"flex-yc g-1 mt-1"},Ha={class:"flex-yc flex-shrink-0"},qa=R(()=>e("span",{class:"ml5 no-select"},"QQ：",-1)),Ra={class:"flex-yc g-1 mt-1"},Aa={class:"flex-yc flex-shrink-0"},Ba=R(()=>e("span",{class:"ml5 no-select"},"微信：",-1)),Na={class:"flex-yc g-1 mt-1"},Pa={class:"flex-yc flex-shrink-0"},Qa=R(()=>e("span",{class:"ml5 no-select"},"邮箱：",-1)),Ja=R(()=>e("div",{class:"split-line my-1"},null,-1)),Oa={class:"flex-yc g-1 mt-1 fs-12 muted-color"},Ga=R(()=>e("span",{class:"no-select flex-shrink-0"},"注册时间：",-1)),Wa={class:"flex-yc g-1 fs-12 muted-color"},Xa=R(()=>e("span",{class:"no-select flex-shrink-0"},"上次登录：",-1)),Ka=E({__name:"FrontUserHome",props:{user:{}},setup(h){return(f,g)=>{var n,t;const o=cs,i=T;return f.user?(l(),p("div",Va,[a(o,{class:"w-100",user:f.user},null,8,["user"]),e("div",Ea,[e("div",La,[e("div",Ta,[a(i,{name:"award-line",color:"var(--primary-color)"}),Ma]),e("span",null,_(f.user.title||"无"),1)]),e("div",Ya,[e("div",Ha,[a(i,{name:"qq-line",color:"var(--primary-color)"}),qa]),e("span",null,_(((n=f.user.json)==null?void 0:n.qq)||"无"),1)]),e("div",Ra,[e("div",Aa,[a(i,{name:"wechat-line",color:"var(--primary-color)"}),Ba]),e("span",null,_(((t=f.user.json)==null?void 0:t.wechat)||"无"),1)]),e("div",Na,[e("div",Pa,[a(i,{name:"mail-line",color:"var(--primary-color)"}),Qa]),e("span",null,_(f.user.email||"无"),1)]),Ja,e("div",Oa,[Ga,e("span",null,_(s(ue)(f.user.create_time,"YYYY-MM-DD HH:mm")),1)]),e("div",Wa,[Xa,e("span",null,_(s(ue)(f.user.login_time,"YYYY-MM-DD HH:mm")),1)])])])):$("",!0)}}}),Za=V(Ka,[["__scopeId","data-v-51068d04"]]),eo=h=>(Y("data-v-a8ef47f4"),h=h(),H(),h),so={class:"user-cover-wrap pr layout-41"},to={class:"layout-card wh-100"},ao=eo(()=>e("div",{class:"overlay wh-100 pa"},null,-1)),oo={class:"flex-yc user-info-card z-1 pr p-1 g-2"},no={class:"avatar-wrap pr"},lo={key:0,class:"gender-item male br-50 fs-12 flex-center"},co={key:1,class:"gender-item female br-50 flex-center fs-12 center"},io={class:"user-info z-1"},ro={class:"flex-yc g-1"},_o={class:"white-color fw-500 fs-15"},po={key:0,class:"article-title fs-12 white-color success-bg br-3 px-1"},uo={class:"h-1x fs-12 mt5"},mo=E({__name:"UserCover",props:{user:{}},setup(h){return(f,g)=>{var d,r,u,y,v,c,x,S,I;const o=Ve,i=me,n=T,t=Xe,w=Fe("imgbox");return l(),p("div",so,[e("div",to,[a(o,{class:"pa wh-100 inset-0",src:((d=f.user.json)==null?void 0:d.cover)||"https://p19.qhimg.com/bdr/__85/t018fe1890bf59b49b2.jpg"},null,8,["src"]),ao,e("div",oo,[e("div",no,[L((l(),D(i,{shape:"square",src:f.user.avatar,size:50},{default:m(()=>[we(_(f.user.nickname),1)]),_:1},8,["src"])),[[w]]),f.user.gender==="boy"?(l(),p("span",lo,[a(n,{name:"men-line",size:"12"})])):$("",!0),f.user.gender==="girl"?(l(),p("span",co,[a(n,{name:"women-line",size:"12"})])):$("",!0)]),e("div",io,[e("div",ro,[e("span",_o,_(f.user.nickname),1),f.user.title?(l(),p("span",po,_((r=f.user)==null?void 0:r.title),1)):$("",!0),a(t,{class:"level-icon",size:16,name:((c=(v=(y=(u=f.user)==null?void 0:u.result)==null?void 0:y.level)==null?void 0:v.current)==null?void 0:c.name)||"",value:((I=(S=(x=f.user.result)==null?void 0:x.level)==null?void 0:S.current)==null?void 0:I.value)||0},null,8,["name","value"])]),e("p",uo,_(f.user.description||"这个人很懒，什么也没有留下..."),1)])])])])}}}),fo=V(mo,[["__scopeId","data-v-a8ef47f4"]]),ho={class:"page-user-profile"},vo={class:"card-bg br-5 overhide"},go={class:"p-2"},yo=E({__name:"index",setup(h){const f=N(),g=fe(),o=$e(),i=ze(),n=Ke("home"),t=M({user:null}),w={fetchData:async()=>{var u,y;if(o.user&&((u=o.user.id)==null?void 0:u.toString())===f.params.id){t.user=o.user;return}const{code:d,data:r}=await xe.one({id:f.params.id});d===200?t.user=r:g.push({name:"404"}),t.user&&be(`${(y=t.user)==null?void 0:y.nickname}-${i.site.title}`)}};return Ze(()=>{var d;t.user&&be(`${(d=t.user)==null?void 0:d.nickname}-${i.site.title}`)}),w.fetchData(),(d,r)=>{const u=A,y=fo,v=Za,c=Ne,x=Fa,S=ra,I=Et,k=nt,C=Vs,b=Pe,z=Ss;return l(),p("div",ho,[e("div",vo,[a(u,{animated:"",loading:s(t).user===null},B({template:m(()=>[e("div",go,[a(u,{rows:3})])]),_:2},[s(t).user?{name:"default",fn:m(()=>[a(y,{user:s(t).user},null,8,["user"]),a(b,{class:"user-profile-tabs p-2",modelValue:s(n),"onUpdate:modelValue":r[0]||(r[0]=j=>es(n)?n.value=j:null),style:{"--el-border-color-light":"var(--border-color)"}},{default:m(()=>{var j;return[a(c,{label:"主页",name:"home"},{default:m(()=>[a(v,{user:s(t).user},null,8,["user"])]),_:1}),a(c,{label:"动态",name:"cross"},{default:m(()=>[s(n)==="cross"?(l(),D(x,{key:0})):$("",!0)]),_:1}),a(c,{label:"文章",name:"article"},{default:m(()=>[s(n)==="article"?(l(),D(S,{key:0})):$("",!0)]),_:1}),a(c,{label:"收藏",name:"collect"},{default:m(()=>[s(n)==="collect"?(l(),D(I,{key:0})):$("",!0)]),_:1}),a(c,{label:"评论",name:"comment"},{default:m(()=>[s(n)==="comment"?(l(),D(k,{key:0})):$("",!0)]),_:1}),s(o).hasLogin&&((j=s(o).user)==null?void 0:j.id.toString())===s(f).params.id?(l(),D(c,{key:0,label:"设置",name:"config"},{default:m(()=>[a(C)]),_:1})):$("",!0)]}),_:1},8,["modelValue"])]),key:"0"}:void 0]),1032,["loading"])]),s(n)==="home"?(l(),D(z,{key:0,class:"mt-2"})):$("",!0)])}}}),ln=V(yo,[["__scopeId","data-v-3c8d470b"]]);export{ln as default};
