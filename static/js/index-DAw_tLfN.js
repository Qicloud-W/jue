import{_ as te}from"./CommentList-CLxjsben.js";import{_ as se}from"./CommentInput-CLsnyAEF.js";import{L as ae,e as oe,M as ne,N as ie,f as re,J as le}from"./element-plus-DEgQ78-a.js";import{e as ce,l as de,p as pe,q as me,r as ue,m as _e,c as fe,_ as he,h as ge,d as ve}from"./index-CYWUNeU5.js";import{u as ke}from"./vue-router-MJGgZ6ro.js";import{c as q}from"./@vueuse-80B0Z04t.js";import{d as ye,i as F,m as be,bg as we,ar as x,o,c,W as d,O as p,u as t,M as h,S as g,a as n,U as v,al as xe,j as Se,P as Le,V as C,aa as P,T as Ce,bn as Ee,bl as Ie}from"./@vue-AVcRlItG.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-D7ajE0Qg.js";import"./clipboard-CJr-i2j9.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-DsZbUfLd.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";const Re=k=>(Ee("data-v-cdbd930f"),k=k(),Ie(),k),Ve={class:"page-links-wrapper"},Ge={class:"flex-sb no-select"},$e={class:"flex-yc g-2"},Ne=Re(()=>n("span",{class:""},"查看详情",-1)),Te=["innerHTML"],Ae={class:"links-title mb-2 w-100"},Be={class:"flex-yc g-1"},De=["src"],He={class:"links-grid g-2"},ze=["href"],Me={class:"title-color trf h-1x mt-1 fs-15"},qe={class:"fs-13 light-text mt5 h-2x"},Fe={key:0,id:"comment-list-wrapper",class:"comment-list-wrapper card-bg mt-2 p-2 br-5"},Pe=ye({__name:"index",setup(k){const U=ke(),E=ce(),y=de(),S=F(),m=F(),e=be({data:null,links:null}),u={fetchData:async()=>{const{code:i,data:a}=await pe.one({key:"links"});i==200?(q(`${a.title}-${E.site.title}`),e.data=a):U.push({name:"404"})},getLinks:async()=>{await u.getLinksGroup();const{code:i,data:a}=await me.column();i===200?e.links=u.getLinksResult(a,y.linksGroup||[]):e.links=[]},getLinksGroup:async()=>{if(y.linksGroup)return;const{code:i,data:a}=await ue.column({field:"id,name,avatar,description"});i===200?y.linksGroup=a:y.linksGroup=[]},handleRefresh:()=>{S.value&&S.value.refresh()},handleCollapse:()=>{m.value==="1"?m.value="":m.value="1"},getLinksResult:(i,a)=>{let f=[];const _={},b=a.map(s=>s.id),w={id:0,name:"默认分组",children:[]};for(const s of a)f.push({id:s.id,name:s.name,avatar:s.avatar,children:[]});i.forEach(s=>{b.includes(s.group)||w.children.push(s),_[s.group]||(_[s.group]=[]),_[s.group].push(s)});for(const s of f)s.children=_[s.id];return f.push(w),f}};return we(()=>{var i;e.data&&q(`${(i=e.data)==null?void 0:i.title}-${E.site.title}`)}),u.fetchData(),u.getLinks(),(i,a)=>{var I,R,V,G,$,N,T,A,B,D,H,z,M;const f=fe,_=he,b=oe,w=ne,s=ie,j=re,J=le,O=ge,W=ae,K=se,Q=te,X=x("lazy"),Y=x("plyr"),Z=x("imgbox"),ee=x("highlight");return o(),c("div",Ve,[d(W,{class:"box-card card-bg bg-5 cus-box-card flex-column h-100",shadow:"never"},{header:p(()=>{var r;return[n("div",Ge,[n("div",$e,[d(f,{name:"pyq",size:"20"}),n("span",null,v(((r=t(e).data)==null?void 0:r.title)||""),1)]),n("div",{class:"flex-yc curp theme-hover g-1 fs-12 light-text",onClick:a[0]||(a[0]=(...L)=>u.handleCollapse&&u.handleCollapse(...L))},[Ne,t(m)!=="1"?(o(),h(_,{key:0,name:"arrow-right-s-line"})):(o(),h(_,{key:1,name:"arrow-down-s-line"}))])])]}),default:p(()=>[d(b,{animated:"",loading:t(e).data===null},xe({template:p(()=>[d(b,{rows:8})]),_:2},[t(e).data?{name:"default",fn:p(()=>[d(s,{modelValue:t(m),"onUpdate:modelValue":a[1]||(a[1]=r=>Se(m)?m.value=r:null),accordion:""},{default:p(()=>[d(w,{name:"1"},{default:p(()=>[Le(n("article",{class:"article-content",innerHTML:t(_e)(t(e).data.content)},null,8,Te),[[X],[Y],[Z],[ee]])]),_:1})]),_:1},8,["modelValue"]),t(e).links&&t(e).links.length?(o(!0),c(C,{key:0},P(t(e).links,(r,L)=>(o(),c("div",{class:"links-list-wrapper mt-1 mb-2 pr",key:L},[r.children&&r.children.length?(o(),c(C,{key:0},[n("div",Ae,[n("div",Be,[r.avatar?(o(),c("img",{key:0,class:"links-avatar br-50",src:r.avatar},null,8,De)):g("",!0),n("span",null,v(r.name),1)])]),n("div",He,[(o(!0),c(C,null,P(r.children,l=>(o(),c("a",{href:l.url,class:"link-item trf br-5 block center p-2",target:"_blank",key:l.id},[d(J,{class:"mt-1",offset:[-10,0],type:l.state==="online"?"success":"danger",value:l.state==="online"?l.ping||"?ms":"离线"},{default:p(()=>[d(j,{shape:"square",src:l.avatar,size:60},{default:p(()=>[Ce(v(l.nickname),1)]),_:2},1032,["src"])]),_:2},1032,["type","value"]),n("div",Me,v(l.nickname),1),n("p",qe,v(l.description),1)],8,ze))),128))])],64)):g("",!0)]))),128)):(o(),h(O,{key:1,text:"暂无友链数据"}))]),key:"0"}:void 0]),1032,["loading"])]),_:1}),t(e).data&&(((V=(R=(I=t(e).data)==null?void 0:I.result)==null?void 0:R.comment)==null?void 0:V.allow)===1||((N=($=(G=t(e).data)==null?void 0:G.result)==null?void 0:$.comment)==null?void 0:N.show)===1)?(o(),c("div",Fe,[((B=(A=(T=t(e).data)==null?void 0:T.result)==null?void 0:A.comment)==null?void 0:B.allow)===1?(o(),h(K,{key:0,class:"mb-3",onHandleSend:u.handleRefresh,pid:0,"bind-id":(t(e).data.id||0).toString(),"bind-type":"page"},null,8,["onHandleSend","bind-id"])):g("",!0),((z=(H=(D=t(e).data)==null?void 0:D.result)==null?void 0:H.comment)==null?void 0:z.show)===1?(o(),h(Q,{key:1,ref_key:"commentListRef",ref:S,"bind-id":(t(e).data.id||0).toString(),uid:((M=t(e).data)==null?void 0:M.uid)||0,"bind-type":"page"},null,8,["bind-id","uid"])):g("",!0)])):g("",!0)])}}}),xt=ve(Pe,[["__scopeId","data-v-cdbd930f"]]);export{xt as default};
