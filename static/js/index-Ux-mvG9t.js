import{L as I,b as E,D as z,E as k}from"./element-plus-DEgQ78-a.js";import{d as H,c as S,H as O,I as U,m as Y,Y as T,Z as w,n as F,_ as C,l as Q}from"./index-CYWUNeU5.js";import{o as p,M as N,O as _,a as e,W as a,bn as R,bl as q,d as A,m as P,k as K,T as u,U as i,u as s,c as v,S as b}from"./@vue-AVcRlItG.js";import{p as B}from"./vueuse-CTCWISgP.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./dayjs-D7ajE0Qg.js";import"./clipboard-CJr-i2j9.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-DsZbUfLd.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./@vueuse-80B0Z04t.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./vue-router-MJGgZ6ro.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";const W={},L=l=>(R("data-v-32d98f87"),l=l(),q(),l),Z={class:"flex-yc g-2"},j=L(()=>e("span",null,"关于作者",-1)),G=L(()=>e("div",{class:"fs-14 text-color"},[e("p",null,"1. 作者： 相左"),e("p",null,"2. 邮箱： ztyangt@yeah.net"),e("p",null,"3. QQ： 2251513837")],-1));function J(l,t){const o=S,r=I;return p(),N(r,{class:"box-card cus-box-card flex-column h-100",shadow:"never"},{header:_(()=>[e("div",Z,[a(o,{name:"huoyue",size:"20"}),j])]),default:_(()=>[G]),_:1})}const X=H(W,[["render",J],["__scopeId","data-v-32d98f87"]]);class ee{systemVersion(){return U.get("/dev/info/version")}}const te=new(O(ee)),se={class:"flex-yc g-2"},oe=e("span",null,"系统信息",-1),ne={class:"flex-yc g-2 fs-14 mb-1"},ce={class:"flex-yc g-1 muted-color"},ae=e("span",null,"当前版本",-1),re={class:"text-color"},ie={class:"flex-yc g-2 fs-14 mb-1"},le={class:"flex-yc g-1 muted-color"},_e=e("span",null,"golang",-1),de={class:"text-color"},me={key:0,class:"new-version-wrapper my-2 p-1 br-5"},pe={class:"text-color fs-14 mb-1"},ue={class:"text-color fs-14 mb-1"},fe={class:"text-color fs-14 mb-1"},he=["innerHTML"],xe={key:1,class:"flex-end"},ve=A({__name:"systemInfo",setup(l){const t=P({loading:!1,current:null,next:null}),o=K(()=>{var n;return t.current&&t.next&&T(t.next.version,(n=t.current)==null?void 0:n.inis)}),r={fetchData:()=>{r.getCurrentVersion(),r.getNextVersion()},getCurrentVersion:async()=>{const{code:n,data:c}=await te.systemVersion();n===200&&(t.current=c)},getNextVersion:async()=>{const{code:n,data:c}=await w.systemNext({progress:"pro"});n===200&&(t.next=c)},handleUpgrade:async()=>{var c;t.loading=!0;const n=await w.upgrade(((c=t.next)==null?void 0:c.id)||0);t.loading=!1,F(n,"升级成功，系统重启后即可体验新版本！")}};return r.fetchData(),(n,c)=>{const d=S,m=C,g=E,y=I;return p(),N(y,{class:"box-card cus-box-card flex-column h-100",shadow:"never"},{header:_(()=>[e("div",se,[a(d,{name:"config",size:"20"}),oe])]),default:_(()=>{var f,h,x,$,D,V,M;return[e("div",ne,[e("div",ce,[a(m,{name:"logout-circle-r-line"}),u(),ae]),e("span",re,i((f=s(t).current)==null?void 0:f.inis),1)]),e("div",ie,[e("div",le,[a(m,{name:"arrow-down-circle-line"}),u(),_e]),e("span",de,i((h=s(t).current)==null?void 0:h.go),1)]),s(o)&&s(t).next?(p(),v("div",me,[e("div",pe,"新版本： "+i((x=s(t).next)==null?void 0:x.version),1),e("div",ue," 安装量： "+i(((V=(D=($=s(t).next)==null?void 0:$.result)==null?void 0:D.download)==null?void 0:V.count)||0),1),e("div",fe," 发布时间： "+i(s(B)(s(t).next.create_time,"YYYY-MM-DD HH:mm")),1),e("div",{class:"pl-2 fs-14 article-content",innerHTML:s(Y)((M=s(t).next)==null?void 0:M.content)},null,8,he)])):b("",!0),s(o)?(p(),v("div",xe,[a(g,{type:"success",onClick:c[0]||(c[0]=Be=>r.handleUpgrade()),loading:s(t).loading},{default:_(()=>[u("升级系统")]),_:1},8,["loading"])])):b("",!0)]}),_:1})}}}),ge={class:"flex-yc g-2"},ye=e("span",null,"主题信息",-1),$e={class:"flex-yc g-2 fs-14 mb-1"},we={class:"flex-yc g-1 muted-color"},be=e("span",null,"当前版本",-1),Ie={class:"text-color"},Se={class:"flex-yc g-2 fs-14 mb-1"},Ne={class:"flex-yc g-1 muted-color"},De=e("span",null,"最新版本",-1),Ve={class:"text-color"},Me={key:0,class:"new-version-wrapper my-2 p-1 br-5"},ke={class:"text-color fs-14 mb-1"},Ee={class:"text-color fs-14 mb-1"},He=["innerHTML"],Ye={class:"flex-end"},Te=A({__name:"themeInfo",setup(l){const t=Q(),o=P({theme:null,new:!1}),r={fetchData:async n=>{const{code:c,data:d,msg:m}=await w.themeNext({theme_key:t.env.INIS_APP_THEME_KEY,libs:"",progress:"pro"});c===200?(o.theme=d,T(d.version,t.env.INIS_APP_VERSION)?(z({title:"更新提示",message:`检测到新的主题版本: ${d.version}`,type:"success"}),o.new=!0):n&&k.success("当前已是最新版本")):n&&k.warning(m||"加测失败")}};return r.fetchData(),(n,c)=>{const d=S,m=C,g=E,y=I;return p(),N(y,{class:"box-card cus-box-card flex-column h-100",shadow:"never"},{header:_(()=>[e("div",ge,[a(d,{name:"star",size:"20"}),ye])]),default:_(()=>{var f,h,x;return[e("div",$e,[e("div",we,[a(m,{name:"logout-circle-r-line"}),u(),be]),e("span",Ie,i(s(t).env.INIS_APP_VERSION),1)]),e("div",Se,[e("div",Ne,[a(m,{name:"arrow-down-circle-line"}),u(),De]),e("span",Ve,i(((f=s(o).theme)==null?void 0:f.version)||"--"),1)]),s(o).new&&s(o).theme?(p(),v("div",Me,[e("div",ke,"新版本： "+i((h=s(o).theme)==null?void 0:h.version),1),e("div",Ee," 发布时间： "+i(s(B)(s(o).theme.create_time,"YYYY-MM-DD HH:mm")),1),e("div",{class:"article-content pl-2",innerHTML:s(Y)((x=s(o).theme)==null?void 0:x.content)},null,8,He)])):b("",!0),e("div",Ye,[a(g,{type:"primary",onClick:c[0]||(c[0]=$=>r.fetchData(!0))},{default:_(()=>[u("版本检测")]),_:1})])]}),_:1})}}}),Ce={},Ae={class:"help-content-wrapper"};function Pe(l,t){const o=Te,r=ve,n=X;return p(),v("div",Ae,[a(o,{class:"mb-2"}),a(r,{class:"mb-2"}),a(n)])}const xt=H(Ce,[["render",Pe]]);export{xt as default};
