import{t as O,f as V,g as y,_ as P,h as Q,d as b,i as U}from"./index-CYWUNeU5.js";import{_ as Y}from"./Image-CtzcM27r.js";import{e as X,f as q,H as G,I as J}from"./element-plus-DEgQ78-a.js";import{d as N,m as T,w as K,af as Z,o as a,c as l,a as e,W as c,al as tt,u as o,O as f,V as x,aa as j,M as k,S as u,U as i,P as et,X as st,bn as at,bl as ot,Q as ct}from"./@vue-AVcRlItG.js";import{p as nt}from"./vueuse-CTCWISgP.js";import{a as it,b as lt}from"./@vueuse-80B0Z04t.js";import"./pinia-DsZbUfLd.js";import"./pinia-plugin-persistedstate-n2tMOXAx.js";import"./axios-BdQ6k-vz.js";import"./nprogress-Dnjw-PvA.js";import"./clipboard-CJr-i2j9.js";import"./vue-router-MJGgZ6ro.js";import"./markdown-it-4Tp5vWU9.js";import"./mdurl-k9Sl0PQj.js";import"./uc.micro-XL2UFyD4.js";import"./entities-C20TfXL6.js";import"./linkify-it-BpOB9kmn.js";import"./punycode.js-Dj65hjkv.js";import"./dayjs-D7ajE0Qg.js";import"./crypto-js-BOfVfFwP.js";import"./vue3-danmaku-DA_6354Q.js";import"./plyr-DMguYs3u.js";import"./viewerjs-ul8fLQ7-.js";import"./highlight.js-DnQT8WiG.js";import"./@unhead-CE7b8z0V.js";import"./unhead-BIJBGSS1.js";import"./hookable-B8xFkYCm.js";import"./lodash-es-25cZ6aDd.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-Bh_lnI-E.js";import"./@ctrl-r5W6hzzQ.js";import"./@popperjs-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";const g=m=>(at("data-v-5a17251d"),m=m(),ot(),m),rt={class:"home-artcle-list-wrapper"},_t={class:"br-5 p-2 card-bg"},dt={key:0,class:"top-article block br-2 fs-12 white-color center mr5"},mt={class:"title-color fw-600 trf"},pt={class:"flex-yc muted-color g-1 mt-1"},ht={class:"flex-yc g-1 theme-hover"},ut={class:"fs-12"},ft=g(()=>e("span",null,"·",-1)),gt={key:0,class:"fs-12"},vt={key:1,class:"fs-12"},wt={class:"flex-sb mt5 g-2"},yt={class:"wh-100"},xt={class:"fs-14 flex-1 lh-2 text-color h-3x"},kt={key:0,class:"flex-yc flex-shrink-0 overhide br-4"},bt={class:"flex-yc g-3 fs-12 mt-1 muted-color"},Dt={class:"flex-yc"},St={class:"ml5"},zt={class:"flex-yc"},At={class:"ml5"},It={class:"flex-yc"},$t={class:"ml5"},Bt={class:"flex-yc"},Ct={class:"ml5"},Ht={class:"flex-yc"},Et={class:"ml5"},Lt={key:0,class:"split-line my-2"},Mt={class:"loading-wrap flex-yc flex-center my-2 fs-12 muted-color"},Vt=g(()=>e("span",null,"加载中...",-1)),Yt={key:0,class:"mb-2 mt-4 flex-yc flex-center fs-12 muted-color"},Nt=g(()=>e("div",{class:"split"},null,-1)),Tt=g(()=>e("span",{class:"mx-1"},"我是有底线的",-1)),jt=g(()=>e("div",{class:"split"},null,-1)),Ft=[Nt,Tt,jt],Rt=N({__name:"HomeArticleList",setup(m){const{arrivedState:h}=it(window),t=T({page:1,limit:12,all_page:1,loading:!1,data:null}),d={initData:()=>{d.getTopArticle(),d.fetchData()},fetchData:async()=>{const{code:r,data:_}=await V.all({page:t.page,limit:t.limit,field:"id,json,result,audit,title,abstract,views,covers,create_time",where:[["audit","=","1"],["top","<>","1"]]});r===200?(t.data?t.data=t.data.concat(y(_.data)):t.data=y(_.data),t.all_page=_.page):t.data=t.data||[]},getTopArticle:async()=>{const{code:r,data:_}=await V.column({field:"id,json,result,title,abstract,views,covers,create_time,top",order:"create_time desc",where:[["audit","=","1"],["top","=","1"]]});r===200&&(t.data||(t.data=[]),t.data.unshift(...y(_)))}};return K(h,async r=>{r.bottom&&(t.page+=1,t.loading=!0,t.page<=t.all_page&&await d.fetchData(),t.loading=!1)}),d.initData(),(r,_)=>{const p=X,v=q,w=Y,n=P,F=Z("RouterLink"),R=Q;return a(),l("section",rt,[e("div",_t,[c(p,{animated:"",loading:o(t).data===null},tt({template:f(()=>[c(p,{rows:10})]),_:2},[o(t).data?{name:"default",fn:f(()=>[o(t).data.length?(a(),l(x,{key:0},[(a(!0),l(x,null,j(o(t).data,(s,W)=>(a(),k(F,{to:{name:"front-article-detail",params:{id:s.id}},class:"article-item-wrap curp",key:s.id},{default:f(()=>{var D,S,z,A,I,$,B,C,H,E,L,M;return[e("div",null,[s.top===1?(a(),l("span",dt,"顶")):u("",!0),e("span",mt,i(s.title),1)]),e("div",pt,[e("div",ht,[c(v,{src:(S=(D=s.result)==null?void 0:D.author)==null?void 0:S.avatar,size:16},null,8,["src"]),e("span",ut,i(((A=(z=s.result)==null?void 0:z.author)==null?void 0:A.nickname)||"未知用户"),1)]),ft,s.top===1?(a(),l("span",gt,i(o(O)(s.create_time*1e3)),1)):(a(),l("span",vt,i(o(nt)(s.create_time,"YYYY-MM-DD HH:mm")),1))]),e("div",wt,[e("div",yt,[e("p",xt,i(s.abstract||"这个人很懒，连摘要都不写。"),1)]),s.covers?(a(),l("div",kt,[c(w,{class:"trf wh-100 article-cover br-4",src:s.covers.split(",")[0]},null,8,["src"])])):u("",!0)]),e("div",bt,[e("div",Dt,[c(n,{name:"eye-line",size:"14"}),e("span",St,i(s.views),1)]),e("div",zt,[c(n,{name:"thumb-up-line",size:"14"}),e("span",At,i((($=(I=s.result)==null?void 0:I.like)==null?void 0:$.length)||0),1)]),e("div",It,[c(n,{name:"message-3-line",size:"14"}),e("span",$t,i(((C=(B=s.result)==null?void 0:B.comment)==null?void 0:C.count)||0),1)]),e("div",Bt,[c(n,{name:"star-line",size:"14"}),e("span",Ct,i(((E=(H=s.result)==null?void 0:H.collect)==null?void 0:E.length)||0),1)]),e("div",Ht,[c(n,{name:"share-box-line",size:"14"}),e("span",Et,i(((M=(L=s.result)==null?void 0:L.share)==null?void 0:M.length)||0),1)])]),W+1<o(t).data.length?(a(),l("div",Lt)):u("",!0)]}),_:2},1032,["to"]))),128)),et(e("div",Mt,[c(n,{name:"loader-2-line ",size:"14",class:"mr5 spinner"}),Vt],512),[[st,o(t).loading]]),o(t).page>o(t).all_page?(a(),l("div",Yt,Ft)):u("",!0)],64)):(a(),k(R,{key:1}))]),key:"0"}:void 0]),1032,["loading"])])])}}}),Wt=b(Rt,[["__scopeId","data-v-5a17251d"]]),Ot={class:"layout-card card-bg"},Pt=["href","target"],Qt={class:"banner-info z-2 p-2 w-100"},Ut={class:"banner-title fw-600 title-color fs-16 h-1x white-color"},Xt={class:"fs-12 h-2x mt5"},qt=N({__name:"HomeBanner",setup(m){const{width:h}=lt(),t=T({data:[]});return{fetchData:async()=>{const r=Math.floor(Date.now()/1e3),{code:_,data:p}=await U.column({where:[["start_time","<",r],["end_time",">",r]],order:"create_time desc"});_===200&&(t.data=p)}}.fetchData(),(r,_)=>{const p=Y,v=G,w=J;return o(t).data.length?(a(),l("div",{key:0,class:ct(["home-banner-wrapper w-100 br-5 pr",o(h)>500?"layout-52":"layout-21"])},[e("div",Ot,[c(w,{interval:5e3,class:"card-bg wh-100 curp","indicator-position":"none",arrow:o(h)<768?"always":o(t).data.length===1?"never":"hover"},{default:f(()=>[(a(!0),l(x,null,j(o(t).data,n=>(a(),k(v,{key:n.id},{default:f(()=>[e("a",{href:n.url,class:"banner-cover pr wh-100 block",target:n.target},[c(p,{class:"article-cover-img wh-100 pa",src:n.image},null,8,["src"]),e("div",Qt,[e("div",Ut,i(n.title),1),e("p",Xt,i(n.content),1)])],8,Pt)]),_:2},1024))),128))]),_:1},8,["arrow"])])],2)):u("",!0)}}}),Gt=b(qt,[["__scopeId","data-v-e84a2af7"]]),Jt={},Kt={class:"page-home-wrapper wh-100"};function Zt(m,h){const t=Gt,d=Wt;return a(),l("div",Kt,[c(t,{class:"mb-2"}),c(d)])}const Ee=b(Jt,[["render",Zt]]);export{Ee as default};
